webpackJsonp([1],{"+BTi":function(e,t){},"/i/W":function(e,t){},"/xpp":function(e,t){},"2rGO":function(e,t){},"7BA2":function(e,t){},"8PcR":function(e,t){},"8jhb":function(e,t){},"98VE":function(e,t){},B6MJ:function(e,t){},BxWU:function(e,t){},Dmry:function(e,t){},Dte2:function(e,t){},EjQr:function(e,t){},FLRp:function(e,t){},GXEp:function(e,t){},GnnV:function(e,t){},I4nB:function(e,t){},KAE0:function(e,t){},M9yL:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("oq7i"),i("+BTi");var n=i("+TD8"),a=i.n(n),o=(i("cwe7"),i("2X9z")),s=i.n(o),l=(i("ylrw"),i("6oiW")),r=i.n(l),c=(i("2rGO"),i("nu7/")),p=i.n(c),m=(i("I4nB"),i("STLj")),u=i.n(m),d=(i("cDSy"),i("e0Bm")),h=i.n(d),g=(i("M9yL"),i("OSLW")),v=i.n(g),f=(i("/i/W"),i("V1RD")),C=i.n(f),w=(i("wlbC"),i("1ZIF")),y=i.n(w),_=(i("8jhb"),i("RDoK")),x=i.n(_),b=(i("X+ky"),i("HJMx")),k=i.n(b),P=(i("jAzQ"),i("wOhx")),T=i.n(P),$=(i("isgN"),i("tLa+")),B=i.n($),L=(i("Dte2"),i("q4le")),S=i.n(L),U=(i("isE6"),i("LR6y")),E=i.n(U),V=(i("BxWU"),i("g2bL")),R=i.n(V),K=(i("WzZF"),i("wxbk")),D=i.n(K),I=(i("TFIm"),i("s3ue")),O=i.n(I),q=(i("dmRH"),i("EKTV")),N=i.n(q),j=(i("GXEp"),i("mtrD")),z=i.n(j),A=(i("jZDA"),i("91Nw")),M=i.n(A),F=(i("d7TW"),i("ajQY")),W=i.n(F),H=i("7+uW"),G={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]},J=i("VU/8")({name:"App",data:function(){return{}},beforeCreate:function(){},mounted:function(){},methods:{},components:{}},G,!1,null,null,null).exports,X=i("/ocq"),Y=(i("7BA2"),{render:function(){var e=this.$createElement;return(this._self._c||e)("div",{on:{click:this.toPageCreate}},[this._v("\n  创建落地页\n")])},staticRenderFns:[]}),Z=i("VU/8")({name:"Login",data:function(){return{}},beforeCreate:function(){},mounted:function(){},methods:{toPageCreate:function(){this.$router.push({path:"/"})}},components:{}},Y,!1,null,null,null).exports,Q=(i("/xpp"),i("EjQr"),{render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"head-info"},[t("div",{staticClass:"info-name"},[t("a",{attrs:{href:"https://yuniorzen.github.io/landpage/dist/"}},[this._v("JD落地页管理系统")])]),this._v(" "),t("div",{staticClass:"info-user"},[t("i",{staticClass:"item-icon el-icon-s-custom"}),this._v(" FDG888")])])}]}),ee=i("VU/8")({name:"HeadInfo",data:function(){return{}},mounted:function(){},methods:{}},Q,!1,null,null,null).exports,te=i("Zrlr"),ie=i.n(te),ne=i("wxAW"),ae=i.n(ne),oe=i("//Fk"),se=i.n(oe),le=i("mtWM"),re=i.n(le).a.create({timeout:5e3});re.interceptors.request.use(function(e){return e},function(e){console.log(e),se.a.reject(e)}),re.interceptors.response.use(function(e){var t=e.data;return 200!==t.code?(s()({message:t.message,type:"error",duration:5e3}),se.a.reject(t)):t},function(e){return console.log("err"+e),s()({message:e.message,type:"error",duration:5e3}),se.a.reject(e)});var ce=re,pe={base:[{type:"Picture",name:"图片"},{type:"Video",name:"视频"}],market:[]},me="",ue="";me="https://wodeyouxi.com/ms/landpage/",ue="https://wodeyouxi.com/ms/landpage/";var de=new(function(){function e(){ie()(this,e),this.baseURL=me,this.staticURL=ue,this.uploadURL=me+"interface/upload"}return ae()(e,[{key:"get",value:function(e,t){return ce.get(""+this.baseURL+e,{params:t})}},{key:"post",value:function(e,t){return ce.post(""+this.baseURL+e,t)}},{key:"getAllPage",value:function(e){return this.post("getAllPage",e)}},{key:"getPage",value:function(e){return this.post("getPage",e)}},{key:"createPage",value:function(e){return this.post("createPage",e)}},{key:"savePage",value:function(e){return this.post("savePage",e)}},{key:"deletePage",value:function(e){return this.post("deletePage",e)}},{key:"updatePageStatus",value:function(e){return this.post("updatePageStatus",e)}}]),e}()),he=function(e){return!String(e||"").trim()},ge=function(e){return/^[a-zA-Z\d_]+$/.test(e)},ve={name:"PageList",data:function(){return{tableData:[],status:"release",name:"",title:"",urlKey:"",disabled:!1,pageSize:10,pageSizes:[10,20,30,40,50,100],pageCount:1,totalSize:0,page:1,multipleSelection:[]}},created:function(){this.search()},methods:{search:function(e){var t=this;"flg"!=e&&(this.page=1);var i=this.status,n=this.pageSize,a=this.page,o=this.title,s=this.urlKey,l=this.name;de.getAllPage({status:i,name:l,pageSize:n,page:a,urlKey:s,title:o}).then(function(e){t.tableData=e.data||[],t.totalSize=e.totalSize||0,0==e.totalSize?t.disabled=!0:t.disabled=!1,t.pageCount=Math.ceil(t.totalSize/t.pageSize)})},reset:function(){this.status="release",this.name="",this.title="",this.urlKey="",this.search()},cratePage:function(){window.open("#/PageCreate","_blank")},editorPage:function(e){window.open("#/PageEditor?urlKey="+e.urlKey,"_blank")},deletePage:function(e){var t=this;this.$confirm("请确认是否删除？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){de.deletePage({urlKey:e.urlKey}).then(function(e){1==t.tableData.length&&1!=t.page&&(t.page=t.page-1),t.$message({type:"success",message:e.message}),t.search("flg")})}).catch(function(){console.log("取消删除")})},previewPage:function(e){window.open("#/PagePreview?urlKey="+e.urlKey,"_blank")},updatePageStatus:function(e,t){var i=this;1==this.tableData.length&&1!=this.page&&(this.page=this.page-1),this.$confirm("落地页将不可见，如需启用，请重新发布。","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){de.updatePageStatus({urlKeys:[e.urlKey],status:"offline"}).then(function(e){i.$message({type:"success",message:e.message}),i.search("flg")})}).catch(function(){console.log("取消暂停")})},statusText:function(e){var t="未发布";switch(e.status){case"unrelease":t="未发布";break;case"release":t="已发布";break;case"offline":t="已暂停";break;case"overdue":t="已过期"}return t},formatDate:function(e){var t,i,n,a,o,s,l,r,c,p="";return e.needExpire?(t=e.expireDate,i=new Date(1*t),n=i.getFullYear(),a=i.getMonth()+1,o=i.getDate(),s=i.getHours(),l=i.getMinutes(),r=i.getSeconds(),p=[n,a,o].map(c=function(e){return(e=e.toString())[1]?e:"0"+e}).join("-")+" "+[s,l,r].map(c).join(":")):p="永不过期",p},handleSelectionChange:function(e){this.multipleSelection=e},releaseTap:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.forEach(function(e){t.push(e.urlKey)},this),t.length==this.tableData.length&&1!=this.page&&(this.page=this.page-1),de.updatePageStatus({urlKeys:t,status:"release"}).then(function(t){e.$message({message:"发布已成功",type:"success"}),e.search("flg")})}else this.$message({message:"请选择要发布的选项~",type:"warning"})},selectable:function(e,t){return"offline"===e.status||"unrelease"===e.status},handleSizeChange:function(e){this.pageSize=1*e,this.page=1,this.search("flg")},handleCurrentChange:function(e){this.page=""+e-0,this.search("flg")},copyLink:function(e){var t=window.location.origin+"/#/landpage?urlKey="+e.urlKey,i=document.createElement("input");i.value=t,document.body.appendChild(i),i.select(),console.log(i.value),document.execCommand("Copy"),this.$message({message:"链接地址已复制成功",type:"success"}),i.remove()},pageEditor:function(e){window.open("#/PageEditor?urlKey="+e.urlKey,"_blank")}},components:{HeadInfo:ee}},fe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("HeadInfo"),e._v(" "),i("div",{staticClass:"query-wraper"},[i("el-row",{staticClass:"maxwidth",attrs:{type:"flex",justify:"space-between"}},[i("el-col",{attrs:{span:5}},[e._v("\n        落地页状态：\n        "),i("el-select",{attrs:{placeholder:"请选择状态"},on:{change:e.search},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),i("el-option",{attrs:{label:"未发布",value:"unrelease"}}),e._v(" "),i("el-option",{attrs:{label:"已发布",value:"release"}}),e._v(" "),i("el-option",{attrs:{label:"已暂停",value:"offline"}}),e._v(" "),i("el-option",{attrs:{label:"已过期",value:"overdue"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:5}},[e._v("\n        UrlKey：\n        "),i("el-input",{staticClass:"query-search",attrs:{placeholder:"请输入落地页urlKey"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.urlKey,callback:function(t){e.urlKey="string"==typeof t?t.trim():t},expression:"urlKey"}})],1),e._v(" "),i("el-col",{attrs:{span:5}},[e._v("\n        名称：\n        "),i("el-input",{staticClass:"query-search",attrs:{placeholder:"请输入落地页名称"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.name,callback:function(t){e.name="string"==typeof t?t.trim():t},expression:"name"}})],1),e._v(" "),i("el-col",{attrs:{span:5}},[e._v("\n        页面标题：\n        "),i("el-input",{staticClass:"query-search",attrs:{placeholder:"请输入页面标题"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.title,callback:function(t){e.title="string"==typeof t?t.trim():t},expression:"title"}})],1),e._v(" "),i("el-col",{staticClass:"align-right",attrs:{span:4}},[i("el-button",{staticClass:"query-btn",attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[e._v("查 询")]),e._v(" "),i("el-button",{staticClass:"query-btn",attrs:{type:"warning"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v("重 置")])],1)],1)],1),e._v(" "),i("div",{staticClass:"page-list maxwidth"},[i("div",{staticClass:"operate-row"},[i("el-button",{staticClass:"operate-btn",attrs:{type:"success"},nativeOn:{click:function(t){return e.releaseTap(t)}}},[e._v("发 布")]),e._v(" "),i("el-button",{staticClass:"operate-btn",attrs:{type:"primary"},on:{click:e.cratePage}},[e._v("新 建")])],1),e._v(" "),i("el-table",{staticClass:"list-table",attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",selectable:e.selectable,width:"70"}}),e._v(" "),i("el-table-column",{attrs:{prop:"urlKey",label:"urlKey"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"title",label:"页面标题"}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.statusText(t.row))+"\n        ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"expireDate",label:"过期日期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.formatDate(t.row))+"\n        ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"creater",label:"创建人",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"operate-btn",on:{click:function(i){return e.copyLink(t.row)}}},[e._v("复制链接")]),e._v(" "),i("span",{staticClass:"operate-btn",on:{click:function(i){return e.pageEditor(t.row)}}},[e._v("编辑")]),e._v(" "),i("span",{staticClass:"operate-btn",on:{click:function(i){return e.previewPage(t.row)}}},[e._v("预览")]),e._v(" "),i("span",{staticClass:"operate-btn operate-delete",on:{click:function(i){return e.deletePage(t.row)}}},[e._v("删除")]),e._v(" "),"release"==t.row.status?i("span",{staticClass:"operate-btn",on:{click:function(i){return e.updatePageStatus(t.row,"offline")}}},[e._v("暂停使用")]):e._e()]}}])})],1),e._v(" "),e.totalSize>0?i("div",{staticClass:"page-box"},[i("el-pagination",{attrs:{"current-page":e.page,"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next",total:e.totalSize,disabled:e.disabled,"page-count":e.pageCount,"page-sizes":e.pageSizes},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)],1)},staticRenderFns:[]},Ce=i("VU/8")(ve,fe,!1,null,null,null).exports,we=i("Dd8w"),ye=i.n(we),_e=(i("FLRp"),i("98VE"),i("GQaK")),xe=i("NYxO"),be=(i("NoWg"),{name:"Carousel",props:{id:{type:String,required:!0},type:{type:String,required:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375},slides:{type:Array,default:function(){return[{imageUrl:"static/img/blank.png",linkType:"goods",link:""}]}},speed:{type:Number,default:2500},loop:{type:Boolean,default:!1},direction:{type:String,default:"horizontal"}},computed:{style:function(){var e="";return e+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?e+="width:100%;":e+="width:"+this.width/100+"rem;",e}},mounted:function(){},methods:{}}),ke={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"component-carousel component-view",style:this.style},[this._v("\n  "+this._s(this.$attrs.name)+"\n")])},staticRenderFns:[]},Pe=i("VU/8")(be,ke,!1,null,null,null).exports,Te=(i("KAE0"),{name:"Event",props:{id:{type:String,required:!0},type:{type:String,required:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375}},computed:{style:function(){var e="";return e+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?e+="width:100%;":e+="width:"+this.width/100+"rem;",e}},mounted:function(){},methods:{}}),$e={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"component-event component-view",style:this.style},[this._v("\n  "+this._s(this.$attrs.name)+"\n")])},staticRenderFns:[]},Be=i("VU/8")(Te,$e,!1,null,null,null).exports,Le=(i("GnnV"),{name:"Goods",props:{id:{type:String,required:!0},type:{type:String,required:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375}},computed:{style:function(){var e="";return e+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?e+="width:100%;":e+="width:"+this.width/100+"rem;",e}},mounted:function(){},methods:{}}),Se={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"component-goods component-view",style:this.style},[this._v("\n  "+this._s(this.$attrs.name)+"\n")])},staticRenderFns:[]},Ue=i("VU/8")(Le,Se,!1,null,null,null).exports,Ee=(i("RJsd"),{name:"Picture",props:{name:String,id:{type:String,required:!0},type:{type:String,required:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375},imageUrl:String,linkType:String,link:String,isChild:{type:Boolean,default:!1},height:Number,left:Number,top:Number},data:function(){return{staticURL:de.staticURL}},mounted:function(){},computed:{style:function(){var e="";return this.isChild?e+="position:absolute;top:"+this.top/100+"rem;left:"+this.left/100+"rem;\n                width:"+this.width/100+"rem;height:"+this.height/100+"rem;":(e+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?e+="width:100%;":e+="width:"+this.width/100+"rem;"),e}},methods:{click:function(){var e=this.linkType,t="goods"==e?"pages/goods-details/goods-details?main_goods_id="+this.link:this.link;window.landpage_env&&"editor"==landpage_env||"none"==!this.linkType||("goods"==e||"page"==e?new se.a(function(e){/MicroMessenger/i.test(navigator.userAgent)&&window.wx&&wx.miniProgram?wx.miniProgram.getEnv(function(t){t.miniprogram?e(!0):e(!1)}):e(!1)}).then(function(e){e?wx.miniProgram.navigateTo({url:t}):alert("当前环境不是小程序端")}):"h5"==e&&(location.href=t))}}}),Ve={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"component-picture component-view",style:this.style},[t("div",{staticClass:"picture-img",on:{click:this.click}},[t("img",{attrs:{src:this.imageUrl&&this.staticURL+this.imageUrl||"static/img/blank.png"}})])])},staticRenderFns:[]},Re=i("VU/8")(Ee,Ve,!1,null,null,null).exports,Ke=(i("YHdu"),{name:"Video",props:{id:{type:String,required:!0},type:{type:String,required:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375},imageUrl:String,isSwitch:Boolean,videoLink:String,isChild:{type:Boolean,default:!1},height:Number,left:Number,top:Number},data:function(){return{isPlay:!1,staticURL:de.staticURL}},computed:{style:function(){var e="";return this.isChild?e+="position:absolute;top:"+this.top/100+"rem;left:"+this.left/100+"rem;width:"+this.width/100+"rem;height:"+this.height/100+"rem;":(e+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?e+="width:100%;":e+="width:"+this.width/100+"rem;"),e},posterStyle:function(){var e="";return this.isSwitch&&this.imageUrl&&(e+="background-image:url("+(this.staticURL+this.imageUrl)+")"),e}},mounted:function(){},methods:{play:function(e){if(this.videoLink)if(this.confirmEnding(this.videoLink,".mp4")){var t=document.querySelector("#video"+this.id);t&&t.play(),this.isPlay=!0}else this.$message({type:"error",message:"视频后缀为mp4格式!"});else this.$message({type:"error",message:"无视频链接~"})},playEnd:function(e){this.isPlay=!1},confirmEnding:function(e,t){var i=e.length-t.length;return e.substr(i,t.length)==t}}}),De={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"component-video component-view",style:e.style},[e.isPlay?e._e():i("div",{staticClass:"video-poster",style:e.posterStyle,on:{click:e.play}},[i("div",{staticClass:"icon-play"})]),e._v(" "),i("video",{attrs:{id:"video"+e.id,src:e.videoLink,controls:"","webkit-playsinline":"true",playsinline:"true","x-webkit-airplay":"allow","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portraint"},on:{ended:e.playEnd}})])},staticRenderFns:[]},Ie=i("VU/8")(Ke,De,!1,null,null,null).exports,Oe={props:["dragComponent"],data:function(){return{scrollbar:null,relativeComponent:null,relativeType:""}},computed:ye()({},Object(xe.b)({activeComponent:function(e){return e.activeComponent},components:function(e){return e.page.components},page:function(e){return e.page}}),{style:function(){var e="";return this.page.extra&&this.page.extra.backgroundColor&&(e+="background-color:"+this.page.extra.backgroundColor+";"),e}}),mounted:function(){this.scrollbar=new _e.a("#page-center",{scrollbar:{fade:!1,interactive:!0},click:!0,disableMouse:!1,momentum:!0,mouseWheel:!0,bounce:!1})},methods:{initComponentProps:function(e){},dragover:function(e){e.preventDefault(),console.log("page dragover"),this.resetRelative()},checkDragOver:function(e,t,i){t.preventDefault();var n=t.currentTarget.offsetHeight,a=t.offsetY-this.dragComponent.extra.pointY,o=n-a-this.dragComponent.extra.height,s=t.offsetX-this.dragComponent.extra.pointX;i&&(a+=i.top,o+=i.bottom,s+=i.left),a>=0&&o>=0?"Picture"==e.type&&(this.relativeType="child"):this.relativeType=a<o?"pre":"next",this.relativeComponent=e,this.dragComponent.extra.top=a,this.dragComponent.extra.left=s,this.dragComponent.extra.bottom=o,console.log("top:"+a+",left:"+s+",bottom:"+o,i)},drop:function(e){if(e.preventDefault(),this.dragComponent){var t=ye()({id:Math.random().toString(32).slice(2)},this.dragComponent);this.$store.commit("setActiveComponent",t),this.relativeComponent&&this.relativeType?(console.log("relativeComponent drop",this.relativeType),"child"==this.relativeType&&(t.isChild=!0,t.width=t.extra.width,t.height=t.extra.height,t.top=t.extra.top,t.left=t.extra.left,t.bottom=t.extra.bottom),delete t.extra,this.$store.commit("addRelativeComponent",{relativeType:this.relativeType,relativeComponent:this.relativeComponent,component:t})):(console.log("page drop"),delete t.extra,this.$store.commit("addComponent",t)),this.$emit("drop"),this.resetRelative()}},setActiveComponent:function(e){this.$store.commit("setActiveComponent",e),this.resetRelative()},removeComponent:function(e){this.$store.commit("removeComponent",e)},contextmenu:function(e){var t=e.clientX,i=e.clientY;this.$store.commit("showContextMenu",{left:t,top:i})},resetRelative:function(){this.relativeComponent=null,this.relativeType=""}},components:{Carousel:Pe,Event:Be,Goods:Ue,Picture:Re,Video:Ie}},qe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wraper",style:e.style,on:{dragover:e.dragover,drop:e.drop}},e._l(e.components,function(t){return i("div",{key:t.id,class:"component-wraper"},[i(t.type,e._b({tag:"component",class:(t.id==e.activeComponent.id?"active":"")+" "+(e.relativeComponent&&e.relativeComponent.id==t.id?"hover-"+e.relativeType:""),nativeOn:{contextmenu:function(t){return t.preventDefault(),e.contextmenu(t)},mousedown:function(i){return e.setActiveComponent(t)},dragover:function(i){return i.stopPropagation(),e.checkDragOver(t,i)}}},"component",t,!1)),e._v(" "),e._l(t.children,function(n){return i(n.type,e._b({key:n.id,tag:"component",class:"component-child "+(n.id==e.activeComponent.id?"active":""),nativeOn:{contextmenu:function(t){return t.preventDefault(),e.contextmenu(t)},mousedown:function(t){return e.setActiveComponent(n)},dragover:function(i){return i.stopPropagation(),e.checkDragOver(t,i,n)}}},"component",n,!1))})],2)}),0)},staticRenderFns:[]},Ne=i("VU/8")(Oe,qe,!1,null,null,null).exports,je=(i("lxJj"),{props:{component:{type:Object,required:!0}},data:function(){var e={};return this.initProps(e),ye()({viewWidth:375},e)},watch:{"component.id":function(e,t){t&&e&&t!==e&&this.initProps(this)},width:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:e})},marginTop:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:e})},marginBottom:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:e})}},methods:{initProps:function(e){e.marginTop=this.component.marginTop||0,e.marginBottom=this.component.marginBottom||0,e.width=this.component.width||375,console.log("初始化图片组件参数",e)}}}),ze={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"carousel-set"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("宽度：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,min:100,"show-tooltip":!1},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.width)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("上边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginTop,callback:function(t){e.marginTop=t},expression:"marginTop"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginTop)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("下边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginBottom,callback:function(t){e.marginBottom=t},expression:"marginBottom"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginBottom)+"px")])],1)],1)],1)],1)},staticRenderFns:[]},Ae=i("VU/8")(je,ze,!1,null,null,null).exports,Me={props:{component:{type:Object,required:!0}},data:function(){var e={};return this.initProps(e),ye()({viewWidth:375},e)},watch:{"component.id":function(e,t){t&&e&&t!==e&&this.initProps(this)},width:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:e})},marginTop:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:e})},marginBottom:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:e})}},methods:{initProps:function(e){e.marginTop=this.component.marginTop||0,e.marginBottom=this.component.marginBottom||0,e.width=this.component.width||375,console.log("初始化图片组件参数",e)}}},Fe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"event-set"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("宽度：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,min:100,"show-tooltip":!1},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.width)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("上边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginTop,callback:function(t){e.marginTop=t},expression:"marginTop"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginTop)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("下边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginBottom,callback:function(t){e.marginBottom=t},expression:"marginBottom"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginBottom)+"px")])],1)],1)],1)],1)},staticRenderFns:[]},We=i("VU/8")(Me,Fe,!1,null,null,null).exports,He={props:{component:{type:Object,required:!0}},data:function(){var e={};return this.initProps(e),ye()({viewWidth:375},e)},watch:{"component.id":function(e,t){t&&e&&t!==e&&this.initProps(this)},width:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:e})},marginTop:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:e})},marginBottom:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:e})}},methods:{initProps:function(e){e.marginTop=this.component.marginTop||0,e.marginBottom=this.component.marginBottom||0,e.width=this.component.width||375,console.log("初始化图片组件参数",e)}}},Ge={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"goods-set"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("宽度：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,min:100,"show-tooltip":!1},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.width)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("上边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginTop,callback:function(t){e.marginTop=t},expression:"marginTop"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginTop)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("下边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginBottom,callback:function(t){e.marginBottom=t},expression:"marginBottom"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginBottom)+"px")])],1)],1)],1)],1)},staticRenderFns:[]},Je=i("VU/8")(He,Ge,!1,null,null,null).exports,Xe={name:"PictureSet",props:{component:{type:Object,required:!0}},data:function(){var e={};return this.initProps(e),ye()({viewWidth:375,goodsLink:"",pageLink:"",h5Link:"",loading:!1,uploadUrl:de.uploadURL,staticURL:de.staticURL},e)},watch:{"component.id":function(e,t){t&&e&&t!==e&&this.initProps(this)},imageUrl:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"imageUrl",newVal:e})},linkType:function(e,t){var i="";switch(this.$store.commit("setComponentProp",{id:this.component.id,prop:"linkType",newVal:e}),e){case"goods":i=this.goodsLink;break;case"page":i=this.pageLink;break;case"h5":i=this.h5Link;break;case"none":i=""}this.$store.commit("setComponentProp",{id:this.component.id,prop:"link",newVal:i}),this.link=i},goodsLink:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"link",newVal:e}),this.link=e},pageLink:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"link",newVal:e}),this.link=e},h5Link:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"link",newVal:e}),this.link=e},width:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:e})},marginTop:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:e})},marginBottom:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:e})},height:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"height",newVal:e})},top:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"top",newVal:e})},left:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"left",newVal:e})}},methods:{initProps:function(e){switch(e.imageUrl=this.component.imageUrl,e.linkType=this.component.linkType||"none",e.link=this.component.link||"",e.linkType){case"goods":e.goodsLink=e.link;break;case"page":e.pageLink=e.link;break;case"h5":e.h5Link=e.link}e.width=this.component.width||375,e.marginTop=this.component.marginTop||0,e.marginBottom=this.component.marginBottom||0,e.height=this.component.height,e.top=this.component.top,e.left=this.component.left},beforeUpload:function(e){return e.size/1024/1024<=1?(this.loading=!0,!0):(this.$alert("图片最大不能超过1MB，请调整后，重新上传！","请重新上传",{confirmButtonText:"OK",showClose:!1}),!1)},uploadSuccess:function(e,t){this.loading=!1,this.imageUrl=e.data.path,this.$message.success("上传图片成功！")},uploadError:function(e,t){this.loading=!1,this.$message.error("上传图片失败："+e)}}},Ye={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"picture-set"},[i("div",{staticClass:"border-wraper mb20"},[i("el-row",{staticClass:"setting-item nomargin-bottom",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("上传图片：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"img-uploader",attrs:{name:"picture",action:e.uploadUrl,accept:"image/*","show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"before-upload":e.beforeUpload}},[i("img",{staticClass:"img-preview",attrs:{src:e.imageUrl&&e.staticURL+e.imageUrl||"static/img/blank.png"}})])],1)],1),e._v(" "),i("div",{staticClass:"tip-info align-center"},[e._v("图片上传支持jpg/jpeg/png/gif格式，最大不能超过1MB")])],1),e._v(" "),i("div",{staticClass:"border-wraper mb20"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("链接类型：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-radio",{attrs:{label:"goods"},model:{value:e.linkType,callback:function(t){e.linkType=t},expression:"linkType"}},[e._v("商品")]),e._v(" "),i("el-radio",{attrs:{label:"page"},model:{value:e.linkType,callback:function(t){e.linkType=t},expression:"linkType"}},[e._v("页面")]),e._v(" "),i("el-radio",{attrs:{label:"h5"},model:{value:e.linkType,callback:function(t){e.linkType=t},expression:"linkType"}},[e._v("H5链接")]),e._v(" "),i("el-radio",{attrs:{label:"none"},model:{value:e.linkType,callback:function(t){e.linkType=t},expression:"linkType"}},[e._v("无")])],1)],1),e._v(" "),"goods"==e.linkType?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("小程序商品：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入商品ID"},model:{value:e.goodsLink,callback:function(t){e.goodsLink=t},expression:"goodsLink"}})],1)],1):e._e(),e._v(" "),"page"==e.linkType?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("小程序页面:")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入小程序页面路径"},model:{value:e.pageLink,callback:function(t){e.pageLink=t},expression:"pageLink"}})],1)],1):e._e(),e._v(" "),"h5"==e.linkType?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("H5链接:")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入H5链接地址"},model:{value:e.h5Link,callback:function(t){e.h5Link=t},expression:"h5Link"}})],1)],1):e._e()],1),e._v(" "),i("div",{staticClass:"border-wraper"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("宽度：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,min:100,"show-tooltip":!1},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.width)+"px")])],1)],1)],1),e._v(" "),e.component.isChild?[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("高度：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,min:100,"show-tooltip":!1},model:{value:e.height,callback:function(t){e.height=t},expression:"height"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.height)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("上边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,"show-tooltip":!1},model:{value:e.top,callback:function(t){e.top=t},expression:"top"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.top)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("左边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,"show-tooltip":!1},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.left)+"px")])],1)],1)],1)]:[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("上边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginTop,callback:function(t){e.marginTop=t},expression:"marginTop"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginTop)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("下边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginBottom,callback:function(t){e.marginBottom=t},expression:"marginBottom"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginBottom)+"px")])],1)],1)],1)]],2)])},staticRenderFns:[]},Ze=i("VU/8")(Xe,Ye,!1,null,null,null).exports,Qe={props:{component:{type:Object,required:!0}},data:function(){var e={};this.$store.state.page;return this.initProps(e),ye()({viewWidth:375,loading:!1,staticURL:de.staticURL,uploadUrl:de.uploadURL},e)},watch:{"component.id":function(e,t){t&&e&&t!==e&&this.initProps(this)},imageUrl:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"imageUrl",newVal:e})},isSwitch:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"isSwitch",newVal:e})},width:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:e})},marginTop:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:e})},marginBottom:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:e})},videoLink:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"videoLink",newVal:e})},height:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"height",newVal:e})},top:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"top",newVal:e})},left:function(e,t){this.$store.commit("setComponentProp",{id:this.component.id,prop:"left",newVal:e})}},methods:{initProps:function(e){e.imageUrl=this.component.imageUrl||"",e.videoLink=this.component.videoLink||"",e.marginTop=this.component.marginTop||0,e.marginBottom=this.component.marginBottom||0,e.width=this.component.width||375,e.isSwitch=this.component.isSwitch||!1,e.height=this.component.height,e.top=this.component.top,e.left=this.component.left},beforeUpload:function(e){return e.size/1024/1024<=1?(this.loading=!0,!0):(this.$alert("图片最大不能超过1MB，请调整后，重新上传！","请重新上传",{confirmButtonText:"OK",showClose:!1}),!1)},uploadProgress:function(e,t){console.log(e,"上传中")},uploadSuccess:function(e,t){this.loading=!1,this.imageUrl=e.data.path,this.$message.success("上传图片成功！")},uploadError:function(e,t){this.loading=!1,this.$message.error("上传图片失败："+e)}}},et={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"video-set"},[i("div",{staticClass:"border-wraper mb20"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("视频链接：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入视频链接地址"},model:{value:e.videoLink,callback:function(t){e.videoLink="string"==typeof t?t.trim():t},expression:"videoLink"}})],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("上传封面：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:e.isSwitch,callback:function(t){e.isSwitch=t},expression:"isSwitch"}})],1)],1),e._v(" "),e.isSwitch?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[e._v("*")]),e._v(" 上传封面：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"img-uploader",attrs:{name:"picture",action:e.uploadUrl,accept:"image/*","show-file-list":!1,"on-success":e.uploadSuccess,"on-progress":e.uploadProgress,"on-error":e.uploadError,"before-upload":e.beforeUpload}},[i("img",{staticClass:"img-preview",attrs:{src:e.imageUrl&&e.staticURL+e.imageUrl||"static/img/blank.png"}})])],1)],1):e._e(),e._v(" "),e.isSwitch?i("div",{staticClass:"tip-info align-center"},[e._v("图片上传支持jpg/jpeg/png/gif格式，最大不能超过1MB")]):e._e()],1),e._v(" "),i("div",{staticClass:"border-wraper mb20"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("宽 度：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,min:100,"show-tooltip":!1},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.width)+"px")])],1)],1)],1),e._v(" "),e.component.isChild?[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("高度：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,min:100,"show-tooltip":!1},model:{value:e.height,callback:function(t){e.height=t},expression:"height"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.height)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("上边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,"show-tooltip":!1},model:{value:e.top,callback:function(t){e.top=t},expression:"top"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.top)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("左边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:e.viewWidth,"show-tooltip":!1},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.left)+"px")])],1)],1)],1)]:[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("上边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginTop,callback:function(t){e.marginTop=t},expression:"marginTop"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginTop)+"px")])],1)],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("下边距：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:e.marginBottom,callback:function(t){e.marginBottom=t},expression:"marginBottom"}})],1),e._v(" "),i("el-col",{staticClass:"value-right"},[e._v(e._s(e.marginBottom)+"px")])],1)],1)],1)]],2)])},staticRenderFns:[]},tt=i("VU/8")(Qe,et,!1,null,null,null).exports,it={data:function(){var e=this.$store.state.page;return{name:e.name,title:e.title,urlKey:e.urlKey,needExpire:e.needExpire,expireDate:e.expireDate,extra:{backgroundColor:e.extra.backgroundColor,needBackTop:e.extra.needBackTop,backTopImage:e.extra.backTopImage,needShare:e.extra.needShare,shareText:e.extra.shareText,shareImage:e.extra.shareImage},pickerOptions:{disabledDate:function(e){var t=Date.now();return e.getTime()<t}},isEditor:"/PageEditor"==this.$route.path,loading:!1,uploadUrl:de.uploadURL,staticURL:de.staticURL}},watch:{urlKey:function(e,t){this.$store.commit("setPageProp",{prop:"urlKey",newVal:e})},name:function(e,t){this.$store.commit("setPageProp",{prop:"name",newVal:e})},title:function(e,t){this.$store.commit("setPageProp",{prop:"title",newVal:e})},"extra.backgroundColor":function(e,t){this.$store.commit("setPageProp",{prop:"extra.backgroundColor",newVal:e,multi:!0})},"extra.needBackTop":function(e,t){this.$store.commit("setPageProp",{prop:"extra.needBackTop",newVal:e,multi:!0}),e?this.$store.commit("setPageProp",{prop:"extra.backTopImage",newVal:this.extra.backTopImage,multi:!0}):this.$store.commit("setPageProp",{prop:"extra.backTopImage",newVal:"",multi:!0})},"extra.backTopImage":function(e,t){this.$store.commit("setPageProp",{prop:"extra.backTopImage",newVal:e,multi:!0})},"extra.needShare":function(e,t){this.$store.commit("setPageProp",{prop:"extra.needShare",newVal:e,multi:!0}),e?(this.$store.commit("setPageProp",{prop:"extra.shareText",newVal:this.extra.shareText,multi:!0}),this.$store.commit("setPageProp",{prop:"extra.shareImage",newVal:this.extra.shareImage,multi:!0})):(this.$store.commit("setPageProp",{prop:"extra.shareText",newVal:"",multi:!0}),this.$store.commit("setPageProp",{prop:"extra.shareImage",newVal:"",multi:!0}))},"extra.shareText":function(e,t){this.$store.commit("setPageProp",{prop:"extra.shareText",newVal:e,multi:!0})},"extra.shareImage":function(e,t){console.log(e,t),this.$store.commit("setPageProp",{prop:"extra.shareImage",newVal:e,multi:!0})},needExpire:function(e,t){this.$store.commit("setPageProp",{prop:"needExpire",newVal:e}),e?this.$store.commit("setPageProp",{prop:"expireDate",newVal:this.expireDate}):this.$store.commit("setPageProp",{prop:"expireDate",newVal:""})},expireDate:function(e,t){this.$store.commit("setPageProp",{prop:"expireDate",newVal:e})}},computed:ye()({},Object(xe.b)({activeComponent:function(e){return e.activeComponent},page:function(e){return e.page}})),methods:{beforeUploadShare:function(e){var t=this;return e.size/1024/1024<=1?new se.a(function(i,n){var a=window.URL||window.webkitURL,o=new Image;o.onload=function(){o.width==o.height&&o.width<=800?(t.loading=!0,i()):(t.$alert("图片需为正方形，且最大尺寸不超过800x800，请重新上传！","上传失败",{confirmButtonText:"OK",showClose:!1}),n())},o.src=a.createObjectURL(e)}):(this.$alert("上传图片大小不能超过 1MB！","上传失败",{confirmButtonText:"OK",showClose:!1}),!1)},uploadSuccessShare:function(e,t){this.loading=!1,this.extra.shareImage=e.data.path,this.$message.success("分享图片上传成功！",t)},beforeUploadBackTop:function(e){return e.size/1024/1024<=1?this.loading=!0:(this.$alert("上传图片大小不能超过 1MB！","上传失败",{confirmButtonText:"OK",showClose:!1}),!1)},uploadSuccessBackTop:function(e,t){this.loading=!1,this.extra.backTopImage=e.data.path,this.$message.success("返回顶部图标上传成功！",t)},uploadError:function(e,t){this.loading=!1,this.$message.error("上传图片失败："+e)}},components:{CarouselSet:Ae,EventSet:We,GoodsSet:Je,PictureSet:Ze,VideoSet:tt}},nt={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"full-container"},[i("div",{staticClass:"component-name"},[e._v(e._s(this.activeComponent.name)+e._s("page"==this.activeComponent.type?"":"组件")+"设置")]),e._v(" "),"page"==this.activeComponent.type?i("div",{staticClass:"page-set"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[e._v("*")]),e._v(" URLKey：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",disabled:e.isEditor,placeholder:"请输入唯一的英文、数字或下划线组合"},model:{value:e.urlKey,callback:function(t){e.urlKey=t},expression:"urlKey"}})],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[e._v("*")]),e._v(" 落地页名称：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入落地页名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[e._v("*")]),e._v(" 页面标题：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入页面标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("页面底色：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-color-picker",{attrs:{"show-alpha":""},model:{value:e.extra.backgroundColor,callback:function(t){e.$set(e.extra,"backgroundColor",t)},expression:"extra.backgroundColor"}})],1)],1),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("有效期：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:e.needExpire,callback:function(t){e.needExpire=t},expression:"needExpire"}})],1)],1),e._v(" "),e.needExpire?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[e._v("*")]),e._v(" 有效期至：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"datetime",align:"right","value-format":"timestamp",placeholder:"请选择日期时间"},model:{value:e.expireDate,callback:function(t){e.expireDate=t},expression:"expireDate"}})],1)],1):e._e(),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("自定义分享：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:e.extra.needShare,callback:function(t){e.$set(e.extra,"needShare",t)},expression:"extra.needShare"}})],1)],1),e._v(" "),e.extra.needShare?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[e._v("*")]),e._v(" 分享标题：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入分享标题，建议15个汉字左右"},model:{value:e.extra.shareText,callback:function(t){e.$set(e.extra,"shareText",t)},expression:"extra.shareText"}})],1)],1):e._e(),e._v(" "),e.extra.needShare?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[e._v("*")]),e._v(" 分享图片：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"img-uploader",attrs:{name:"picture",action:e.uploadUrl,accept:"image/*","show-file-list":!1,"on-success":e.uploadSuccessShare,"on-error":e.uploadError,"before-upload":e.beforeUploadShare}},[i("img",{staticClass:"share-image",attrs:{src:e.extra.shareImage&&e.staticURL+e.extra.shareImage||"static/img/blank.png"}})]),e._v(" "),i("div",{staticClass:"tip-info"},[e._v("图片需为正方形，且最大不能超过800px")])],1)],1):e._e(),e._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[e._v("返回顶部功能：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:e.extra.needBackTop,callback:function(t){e.$set(e.extra,"needBackTop",t)},expression:"extra.needBackTop"}})],1)],1),e._v(" "),e.extra.needBackTop?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[e._v("*")]),e._v(" 返回顶部图标：")]),e._v(" "),i("el-col",{staticClass:"item-value"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"img-uploader",attrs:{name:"picture",action:e.uploadUrl,accept:"image/*","show-file-list":!1,"on-success":e.uploadSuccessBackTop,"on-error":e.uploadError,"before-upload":e.beforeUploadBackTop}},[i("img",{staticClass:"backtop-image",attrs:{src:e.extra.backTopImage&&e.staticURL+e.extra.backTopImage||"static/img/blank.png"}})])],1)],1):e._e()],1):i("div",{staticClass:"componet-set"},[i(e.activeComponent.type+"Set",{tag:"component",attrs:{component:e.activeComponent}})],1)])},staticRenderFns:[]},at=i("VU/8")(it,nt,!1,null,null,null).exports,ot=(i("B6MJ"),{name:"ContextMenu",computed:ye()({},Object(xe.b)({components:function(e){return e.page.components},activeComponent:function(e){return e.activeComponent},contextMenu:function(e){return e.contextMenu},isChild:function(e){return e.activeComponent.isChild}}),{style:function(){var e="";return e+="top:"+(this.contextMenu.top-2)+"px; left:"+(this.contextMenu.left-5)+"px; display:"+(this.contextMenu.show?"block":"none")+";",e},hasLevel:function(){var e=this;if(this.isChild)for(var t=0;t<this.components.length;t++){if(this.components[t].children)if(-1!=this.components[t].children.findIndex(function(t){return t.id==e.activeComponent.id})&&this.components[t].children.length>1)return!0}return!1}}),mounted:function(){var e=this;document.addEventListener("mouseup",function(t){e.$store.state.contextMenu.show=!1})},methods:{removeComponent:function(){this.activeComponent&&"page"!=this.activeComponent.type&&this.$store.commit("removeComponent",this.activeComponent)},updateIndex:function(e){this.$store.commit("updateComponentIndex",{component:this.activeComponent,type:e})},updateLevel:function(e){this.$store.commit("updateComponentLevel",{component:this.activeComponent,type:e})},mouseleave:function(){this.$store.state.contextMenu.show=!1}}}),st={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"component-contextmenu",style:e.style,on:{mouseleave:e.mouseleave}},[e.isChild?[i("div",{staticClass:"contextmenu-item",on:{click:e.removeComponent}},[e._v("删除")]),e._v(" "),e.hasLevel?[i("div",{staticClass:"contextmenu-item",on:{click:function(t){return e.updateLevel("pre")}}},[e._v("上一层")]),e._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(t){return e.updateLevel("next")}}},[e._v("下一层")])]:e._e()]:[i("div",{staticClass:"contextmenu-item",on:{click:e.removeComponent}},[e._v("删除")]),e._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(t){return e.updateIndex("pre")}}},[e._v("上移")]),e._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(t){return e.updateIndex("next")}}},[e._v("下移")]),e._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(t){return e.updateIndex("top")}}},[e._v("置顶")]),e._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(t){return e.updateIndex("bottom")}}},[e._v("置底")])]],2)},staticRenderFns:[]},lt=i("VU/8")(ot,st,!1,null,null,null).exports,rt=(i("dJ7j"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{staticClass:"breadcrumb-wraper",attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("el-col",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[this._v("落地页列表")]),this._v(" "),t("el-breadcrumb-item",[this._v(this._s(this.$route.meta.title))])],1)],1),this._v(" "),t("el-col",[this._t("default")],2)],1)},staticRenderFns:[]}),ct=i("VU/8")({name:"BreadCrumb",data:function(){return{}},mounted:function(){},methods:{}},rt,!1,null,null,null).exports,pt={name:"PageCreate",data:function(){return{components:pe,dragComponent:null,isEditor:"/PageEditor"==this.$route.path,staticURL:de.staticURL}},computed:ye()({},Object(xe.b)({activeComponent:function(e){return e.activeComponent},page:function(e){return e.page}}),{showBtn:function(){return!this.isEditor||"release"!=this.page.status}}),beforeCreate:function(){var e=this;document.addEventListener("mousedown",function(t){var i=t.target;(i.classList.contains("custom-page")||i.classList.contains("page-wraper")||i.classList.contains("component-wraper"))&&e.$store.commit("resetActiveComponent")})},methods:{dragstart:function(e,t){e.extra={width:t.currentTarget.offsetWidth,height:t.currentTarget.offsetHeight,pointX:t.offsetX,pointY:t.offsetY},this.dragComponent=e,this.$store.commit("resetActiveComponent"),t.dataTransfer.setData("type",e.type),t.dataTransfer.effectAllowed="copy"},drop:function(){this.dragComponent=null},save:function(){var e=this;this.validate()&&(this.isEditor?de.savePage:de.createPage).call(de,ye()({},this.$store.state.page)).then(function(t){e.$alert("保存成功，即将跳转到列表页面！","保存成功",{confirmButtonText:"OK",showClose:!1,callback:function(t){e.$router.push({path:"/PageList"})}})}).catch(function(t){e.$store.commit("resetActiveComponent")})},preview:function(){var e=this;this.validate()&&(this.isEditor?de.savePage:de.createPage).call(de,ye()({},this.$store.state.page)).then(function(t){e.$alert("保存成功，即将跳转到预览页面！","保存成功",{confirmButtonText:"OK",showClose:!1,callback:function(t){e.$router.push({path:"/PagePreview?urlKey="+e.$store.state.page.urlKey})}})}).catch(function(t){e.$store.commit("resetActiveComponent")})},release:function(){var e=this;this.validate()&&(this.isEditor?de.savePage:de.createPage).call(de,ye()({},this.$store.state.page,{status:"release"})).then(function(t){e.$alert("保存并发布成功，即将跳转到列表页面！","发布成功",{confirmButtonText:"OK",showClose:!1,callback:function(t){e.$router.push({path:"/PageList"})}})}).catch(function(t){e.$store.commit("resetActiveComponent")})},validate:function(){var e=this.page,t=this.activeComponent;if("page"==t.type){if(!this.validatePage(e))return!1;for(var i=0;i<e.components.length;i++)if(!this.validateComponent(e.components[i]))return this.$store.commit("setActiveComponent",e.components[i]),!1}else{if(!this.validateComponent(t))return!1;for(var n=0;n<e.components.length;n++){if(!this.validateComponent(e.components[n]))return this.$store.commit("setActiveComponent",e.components[n]),!1;for(var a=0;e.components[n].children&&a<e.components[n].children.length;a++)if(!this.validateComponent(e.components[n].children[a]))return this.$store.commit("setActiveComponent",e.components[n].children[a]),!1}if(!this.validatePage(e))return this.$store.commit("resetActiveComponent"),!1}return!0},validatePage:function(e){if(he(e.urlKey))return this.$message({type:"error",message:"页面组件-请填写URLKey!"}),!1;if(!ge(e.urlKey))return this.$message({type:"error",message:"页面组件-请填写正确的URLKey!"}),!1;if(he(e.name))return this.$message({type:"error",message:"页面组件-请填写落地页名称!"}),!1;if(he(e.title))return this.$message({type:"error",message:"页面组件-请填写页面标题!"}),!1;if(e.needExpire){if(!e.expireDate)return this.$message({type:"error",message:"页面组件-请选择有效期时间！"}),!1;if(e.expireDate<=Date.now())return this.$message({type:"error",message:"页面组件-有效期已过期，请重新选择！"}),!1}if(e.extra.needShare){if(!e.extra.shareText.trim())return this.$message({type:"error",message:"页面组件-请填写分享标题！"}),!1;if(!e.extra.shareImage.trim())return this.$message({type:"error",message:"页面组件-请上传分享图片！"}),!1}return!(e.extra.needBackTop&&!e.extra.backTopImage)||(this.$message({type:"error",message:"页面组件-请上传返回顶部图标！"}),!1)},validateComponent:function(e){var t="";switch(e.type){case"Picture":if(he(e.imageUrl))return this.$message({type:"error",message:"图片组件-请上传图片！"}),!1;if("goods"==e.linkType&&he(e.link))return t="图片组件-请填写小程序商品ID！",this.$message({type:"error",message:t}),!1;if("page"==e.linkType&&he(e.link))return t="图片组件-请填写小程序页面路径！",this.$message({type:"error",message:t}),!1;if("h5"==e.linkType&&he(e.link))return t="图片组件-请填写H5链接地址！",this.$message({type:"error",message:t}),!1;break;case"Video":if(he(e.videoLink))return this.$message({type:"error",message:"请填写视频链接地址！"}),!1;if(e.isSwitch&&he(e.imageUrl))return this.$message({type:"error",message:"请上传封面图片！"}),!1}return!0},iconClass:function(e){var t="";switch(e){case"Picture":t="el-icon-picture";break;case"Carousel":t="el-icon-s-grid";break;case"Video":t="el-icon-film";break;case"Goods":t="el-icon-goods";break;case"Event":t="el-icon-thumb";break;default:t="el-icon-chicken"}return t}},components:{pageCenter:Ne,pageRight:at,ContextMenu:lt,HeadInfo:ee,BreadCrumb:ct}},mt={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-create full-container"},[i("HeadInfo"),e._v(" "),i("BreadCrumb",[i("div",{staticClass:"operate-btns"},[i("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.save}},[e._v("保存")]),e._v(" "),e.showBtn?i("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.preview}},[e._v("保存并预览")]):e._e(),e._v(" "),e.showBtn?i("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.release}},[e._v("保存并发布")]):e._e()],1)]),e._v(" "),i("el-row",{staticClass:"custom-page",attrs:{type:"flex",justify:"space-between"}},[i("el-col",{staticClass:"page-left"},[i("div",{staticClass:"component-cate"},[e._v("基础组件")]),e._v(" "),i("el-row",{staticClass:"component-list",attrs:{type:"flex"}},e._l(e.components.base,function(t){return i("el-col",{key:t.type,staticClass:"component-item",attrs:{draggable:!t.disableDrag},nativeOn:{dragstart:function(i){return e.dragstart(t,i)}}},[i("i",{class:"item-icon "+e.iconClass(t.type)}),e._v(" "),i("div",{staticClass:"item-name"},[e._v(e._s(t.name))])])}),1),e._v(" "),i("div",{staticClass:"component-cate"},[e._v("营销组件")]),e._v(" "),i("el-row",{staticClass:"compoonet-list",attrs:{type:"flex"}},e._l(e.components.market,function(t){return i("el-col",{key:t.type,staticClass:"component-item",attrs:{draggable:!t.disableDrag},nativeOn:{dragstart:function(i){return e.dragstart(t,i)}}},[i("i",{class:"item-icon "+e.iconClass(t.type)}),e._v(" "),i("div",{staticClass:"item-name"},[e._v(e._s(t.name))])])}),1)],1),e._v(" "),i("el-col",{staticClass:"page-center",attrs:{id:"page-center"}},[i("pageCenter",{attrs:{dragComponent:e.dragComponent},on:{drop:e.drop}}),e._v(" "),0==e.page.components.length?i("div",{staticClass:"page-empty"},[e._v("请拖入左侧组件到此区域")]):e._e(),e._v(" "),e.page.extra.needBackTop&&e.page.extra.backTopImage?i("div",{staticClass:"backTop"},[i("img",{attrs:{src:e.staticURL+e.page.extra.backTopImage}})]):e._e()],1),e._v(" "),i("el-col",{staticClass:"page-right"},[i("pageRight")],1)],1),e._v(" "),i("ContextMenu")],1)},staticRenderFns:[]},ut=i("VU/8")(pt,mt,!1,null,null,null).exports,dt={name:"PageEditor",data:function(){return{urlKey:"",show:!1}},created:function(){var e=this,t=this.$loading();this.urlKey=this.$route.query.urlKey,de.getPage({urlKey:this.urlKey}).then(function(i){e.$store.state.page=i.data,setTimeout(function(){e.show=!0,t.close()},500)})},mounted:function(){},methods:{},components:{PageCreate:ut}},ht={render:function(){var e=this.$createElement,t=this._self._c||e;return this.show?t("PageCreate"):this._e()},staticRenderFns:[]},gt=i("VU/8")(dt,ht,!1,null,null,null).exports,vt=(i("sJ06"),{data:function(){return{urlKey:null,title:"",page:{}}},created:function(){var e=this;this.urlKey=this.$route.query.urlKey,de.getPage({urlKey:this.urlKey}).then(function(t){e.page=t.data,e.title=t.data.title})},mounted:function(){},methods:{},components:{HeadInfo:ee,BreadCrumb:ct}}),ft={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("HeadInfo"),e._v(" "),i("BreadCrumb"),e._v(" "),i("div",{staticClass:"preview"},[i("div",{staticClass:"miniprogram-wraper"},[i("div",{staticClass:"miniprogram-head"},[i("div",{staticClass:"head-title ellipsis"},[e._v(e._s(e.title))])]),e._v(" "),i("div",{staticClass:"miniprogram-con"},[i("iframe",{attrs:{src:"/#/LandPage?urlKey="+e.urlKey}})])]),e._v(" "),i("div",{staticClass:"erweima-wraper"})])],1)},staticRenderFns:[]},Ct=i("VU/8")(vt,ft,!1,null,null,null).exports,wt=(i("Dmry"),{data:function(){return{scrollbar:null,urlKey:null,page:null,scrollTop:!1,components:[],staticURL:de.staticURL}},computed:{style:function(){var e="";return this.page&&this.page.extra.backgroundColor&&(e+="background-color:"+this.page.extra.backgroundColor+";"),e}},created:function(){var e=this;this.urlKey=this.$route.query.urlKey,de.getPage({urlKey:this.urlKey}).then(function(t){e.page=t.data,e.components=t.data.components,e.initPage()})},methods:{initPage:function(){var e=this.page;window.landpage_env="preview",document.title=e.title,e.extra.needBackTop&&window.addEventListener("scroll",function(e,t){var i=void 0,n=0;return function(){var a=this,o=Number(new Date)-n,s=arguments;function l(){n=Number(new Date),t.apply(a,s)}clearTimeout(i),o>e?l():i=setTimeout(l,e-o)}}(300,this.onScroll))},onScroll:function(){var e=document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=e>200},backTop:function(){!function e(){var t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/5))}()}},components:{Carousel:Pe,Event:Be,Goods:Ue,Picture:Re,Video:Ie}}),yt={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wraper",style:e.style},[e._l(e.components,function(t){return i("div",{key:t.id,staticClass:"component-wraper"},[i(t.type,e._b({tag:"component"},"component",t,!1)),e._v(" "),e._l(t.children,function(t){return i(t.type,e._b({key:t.id,tag:"component",staticClass:"component-child"},"component",t,!1))})],2)}),e._v(" "),i("transition",{attrs:{name:"el-fade-in"}},[e.scrollTop&&e.page&&e.page.extra.needBackTop?i("div",{staticClass:"backTop",on:{click:e.backTop}},[i("img",{attrs:{src:e.staticURL+e.page.extra.backTopImage}})]):e._e()])],2)},staticRenderFns:[]};var _t=i("VU/8")(wt,yt,!1,function(e){i("b8c7")},null,null).exports;H.default.use(X.a);var xt=new X.a({routes:[{path:"/Login",name:"Login",meta:{title:"登陆"},component:Z},{path:"/PageList",name:"PageList",meta:{title:"落地页列表"},component:Ce},{path:"/",name:"PageList",meta:{title:"落地页列表"},component:Ce},{path:"/PageCreate",name:"PageCreate",meta:{title:"新建落地页"},component:ut},{path:"/PageEditor",name:"PageEditor",meta:{title:"编辑落地页"},component:gt},{path:"/PagePreview",name:"PagePreview",meta:{title:"落地页预览"},component:Ct},{path:"/LandPage",name:"LandPage",component:_t}]}),bt={type:"page",name:"页面"},kt={defaultComponent:bt,activeComponent:bt,page:{name:"",title:"",urlKey:"",needExpire:!1,expireDate:"",extra:{backgroundColor:"",needBackTop:!1,backTopImage:"",needShare:!1,shareText:"",shareImage:""},components:[]},contextMenu:{top:0,left:0,type:"component",show:!1}},Pt=i("bOdI"),Tt=i.n(Pt),$t={setActiveComponent:function(e,t){e.activeComponent=t},addComponent:function(e,t){e.page.components.push(t)},addRelativeComponent:function(e,t){var i=t.relativeType,n=t.relativeComponent,a=t.component,o=e.page.components,s=o.findIndex(function(e,t){if(e.id===n.id)return!0});switch(i){case"child":o[s].hasOwnProperty("children")?o[s].children.push(a):H.default.set(o[s],"children",[a]);break;case"pre":o.splice(s,0,a);break;case"next":o.splice(s+1,0,a)}},removeComponent:function(e,t){for(var i,n=e.page.components,a=-1,o=0;o<n.length;o++){if((i=n[o]).id==t.id){n.splice(o,1),a=o;break}if(i.children)for(var s=0;s<i.children.length;s++)if(i.children[s].id==t.id){i.children.splice(s,1),a=o,o=n.length;break}}-1!=a&&(e.page.components=n,e.activeComponent=e.defaultComponent)},resetActiveComponent:function(e,t){e.activeComponent=e.defaultComponent},setComponentProp:function(e,t){var i=e.page.components,n=null,a=void 0;i.find(function(e,i){if(e.id==t.id)return n=e,a=i;e.children&&e.children.find(function(e){if(e.id==t.id)return n=e,a=i})}),n&&(n.hasOwnProperty(t.prop)?(n[t.prop]=t.newVal,H.default.set(e.page.components,a,i[a])):H.default.set(n,t.prop,t.newVal))},updateComponentIndex:function(e,t){var i=t.type,n=t.component,a=e.page.components,o=a.findIndex(function(e,t){if(e.id===n.id)return!0});if(-1!=o)switch(i){case"pre":0!=o&&(a.splice(o,1),a.splice(o-1,0,n));break;case"next":o!=a.length-1&&(a.splice(o,1),a.splice(o+1,0,n));break;case"top":0!=o&&(a.splice(o,1),a.splice(0,0,n));break;case"bottom":o!=a.length-1&&(a.splice(o,1),a.splice(a.length,0,n))}},updateComponentLevel:function(e,t){for(var i=t.component,n=t.type,a=e.page.components,o=-1,s=-1,l=0;l<a.length;l++)if(a[l].children&&a[l].children.length>0){var r=a[l].children.findIndex(function(e){if(e.id==i.id)return!0});if(-1!=r){o=l,s=r;break}}if(-1!=s){switch(n){case"pre":s!=a[o].children.length-1&&(a[o].children.splice(s,1),a[o].children.splice(s+1,0,i));break;case"next":0!=s&&(a[o].children.splice(s,1),a[o].children.splice(s-1,0,i))}H.default.set(e.page.components,o,a[o])}},setPageProp:function(e,t){var i=e.page;if(t.multi){var n=t.prop.split(".");i.hasOwnProperty(n[0])?i[n[0]][n[1]]=t.newVal:H.default.set(i,n[0],Tt()({},n[1],t.newVal))}else i.hasOwnProperty(t.prop)?i[t.prop]=t.newVal:H.default.set(i,t.prop,t.newVal)},showContextMenu:function(e,t){var i=e.contextMenu;i.show=!0,i.top=t.top,i.left=t.left}},Bt={getShopList:function(e){e.commit;return new se.a(function(e,t){})}};
/**!
 * 组件间需要共享的全部状态
 * 
 */H.default.use(xe.a);var Lt=new xe.a.Store({state:kt,mutations:$t,actions:Bt});i("l2Nk"),i("8PcR");xt.beforeEach(function(e,t,i){e.meta.title&&(document.title=e.meta.title),i()}),H.default.use(W.a),H.default.use(M.a),H.default.use(z.a),H.default.use(N.a),H.default.use(O.a),H.default.use(D.a),H.default.use(R.a),H.default.use(E.a),H.default.use(S.a),H.default.use(B.a),H.default.use(T.a),H.default.use(k.a),H.default.use(x.a),H.default.use(y.a),H.default.use(C.a),H.default.use(v.a),H.default.use(h.a),H.default.use(u.a),H.default.use(p.a.directive),H.default.use(r.a),H.default.prototype.$loading=p.a.service,H.default.prototype.$message=s.a,H.default.prototype.$alert=a.a.alert,H.default.prototype.$confirm=a.a.confirm,H.default.prototype.$prompt=a.a.prompt,H.default.prototype.$ELEMENT={size:"small"},H.default.config.productionTip=!1,window.landpage_env="editor",new H.default({el:"#app",router:xt,store:Lt,components:{App:J},template:"<App/>"})},NoWg:function(e,t){},RJsd:function(e,t){},TFIm:function(e,t){},WzZF:function(e,t){},"X+ky":function(e,t){},YHdu:function(e,t){},b8c7:function(e,t){},cDSy:function(e,t){},cwe7:function(e,t){},d7TW:function(e,t){},dJ7j:function(e,t){},dmRH:function(e,t){},isE6:function(e,t){},isgN:function(e,t){},jAzQ:function(e,t){},jZDA:function(e,t){},l2Nk:function(e,t){},lxJj:function(e,t){},oq7i:function(e,t){},sJ06:function(e,t){},wlbC:function(e,t){},ylrw:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.4274e8097075b35e1029.js.map