webpackJsonp([1],{"+BTi":function(t,e){},"/i/W":function(t,e){},"/xpp":function(t,e){},"2rGO":function(t,e){},"7BA2":function(t,e){},"8PcR":function(t,e){},"8jhb":function(t,e){},"98VE":function(t,e){},B6MJ:function(t,e){},BxWU:function(t,e){},Dmry:function(t,e){},Dte2:function(t,e){},EjQr:function(t,e){},FLRp:function(t,e){},GXEp:function(t,e){},GnnV:function(t,e){},I4nB:function(t,e){},KAE0:function(t,e){},M9yL:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("oq7i"),i("+BTi");var n=i("+TD8"),a=i.n(n),o=(i("cwe7"),i("2X9z")),s=i.n(o),l=(i("ylrw"),i("6oiW")),r=i.n(l),c=(i("2rGO"),i("nu7/")),p=i.n(c),m=(i("hXTu"),i("y7os")),u=i.n(m),d=(i("vBcO"),i("ARSI")),h=i.n(d),g=(i("I4nB"),i("STLj")),v=i.n(g),f=(i("cDSy"),i("e0Bm")),C=i.n(f),w=(i("M9yL"),i("OSLW")),_=i.n(w),y=(i("/i/W"),i("V1RD")),x=i.n(y),k=(i("wlbC"),i("1ZIF")),b=i.n(k),T=(i("8jhb"),i("RDoK")),P=i.n(T),$=(i("X+ky"),i("HJMx")),S=i.n($),U=(i("jAzQ"),i("wOhx")),B=i.n(U),L=(i("isgN"),i("tLa+")),V=i.n(L),E=(i("Dte2"),i("q4le")),R=i.n(E),K=(i("isE6"),i("LR6y")),I=i.n(K),D=(i("BxWU"),i("g2bL")),O=i.n(D),N=(i("WzZF"),i("wxbk")),z=i.n(N),j=(i("TFIm"),i("s3ue")),q=i.n(j),A=(i("dmRH"),i("EKTV")),W=i.n(A),M=(i("GXEp"),i("mtrD")),F=i.n(M),H=(i("jZDA"),i("91Nw")),G=i.n(H),J=(i("d7TW"),i("ajQY")),X=i.n(J),Y=i("7+uW"),Z={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},Q=i("VU/8")({name:"App",data:function(){return{}},beforeCreate:function(){},mounted:function(){},methods:{},components:{}},Z,!1,null,null,null).exports,tt=i("/ocq"),et=(i("7BA2"),{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{on:{click:this.toPageCreate}},[this._v("\n  创建落地页\n")])},staticRenderFns:[]}),it=i("VU/8")({name:"Login",data:function(){return{}},beforeCreate:function(){},mounted:function(){},methods:{toPageCreate:function(){this.$router.push({path:"/"})}},components:{}},et,!1,null,null,null).exports,nt=(i("/xpp"),i("EjQr"),{name:"HeadInfo",data:function(){return{}},methods:{goHome:function(){window.location.href=window.location.origin+window.location.pathname}}}),at={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head-info"},[e("div",{staticClass:"info-name"},[e("a",{attrs:{href:"javascript:;"},on:{click:this.goHome}},[this._v("落地页管理系统")])]),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info-user"},[e("i",{staticClass:"item-icon el-icon-s-custom"}),this._v(" 运营-张山")])}]},ot=i("VU/8")(nt,at,!1,null,null,null).exports,st=i("Zrlr"),lt=i.n(st),rt=i("wxAW"),ct=i.n(rt),pt=i("//Fk"),mt=i.n(pt),ut=i("mtWM"),dt=i.n(ut).a.create({timeout:5e3});dt.interceptors.request.use(function(t){return t},function(t){console.log(t),mt.a.reject(t)}),dt.interceptors.response.use(function(t){var e=t.data;return 200!==e.code?(s()({message:e.message,type:"error",duration:5e3}),mt.a.reject(e)):e},function(t){return console.log("err"+t),s()({message:t.message,type:"error",duration:5e3}),mt.a.reject(t)});var ht=dt,gt={base:[{type:"Picture",name:"图片"},{type:"Video",name:"视频"},{type:"Carousel",name:"轮播图"}],market:[{type:"Event",name:"事件",disableDrag:!0},{type:"Goods",name:"商品列表",disableDrag:!0}]},vt="",ft="";vt="https://wodeyouxi.com/ms/landpage",ft="https://wodeyouxi.com/upload_landpage";var Ct=new(function(){function t(){lt()(this,t),this.baseURL=vt,this.staticURL=ft,this.uploadURL=vt+"/upload"}return ct()(t,[{key:"get",value:function(t,e){return ht.get(""+this.baseURL+t,{params:e})}},{key:"post",value:function(t,e){return ht.post(""+this.baseURL+t,e)}},{key:"getAllPage",value:function(t){return this.post("/getAllPage",t)}},{key:"getPage",value:function(t){return this.post("/getPage",t)}},{key:"createPage",value:function(t){return this.post("/createPage",t)}},{key:"savePage",value:function(t){return this.post("/savePage",t)}},{key:"deletePage",value:function(t){return this.post("/deletePage",t)}},{key:"updatePageStatus",value:function(t){return this.post("/updatePageStatus",t)}}]),t}()),wt=function(t){return!String(t||"").trim()},_t=function(t){return/^[a-zA-Z\d_]+$/.test(t)},yt=function(t){var e=new Date(1*t),i=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),o=e.getHours(),s=e.getMinutes(),l=e.getSeconds(),r=function(t){return(t=t.toString())[1]?t:"0"+t};return[i,n,a].map(r).join("-")+" "+[o,s,l].map(r).join(":")},xt={name:"PageList",data:function(){return{tableData:[],status:"",name:"",title:"",urlKey:"",disabled:!1,pageSize:10,pageSizes:[10,20,30,40,50,100],pageCount:1,totalSize:0,page:1,multipleSelection:[]}},created:function(){this.search()},methods:{search:function(t){var e=this;"flg"!=t&&(this.page=1);var i=this.status,n=this.pageSize,a=this.page,o=this.title,s=this.urlKey,l=this.name;Ct.getAllPage({status:i,name:l,pageSize:n,page:a,urlKey:s,title:o}).then(function(t){e.tableData=t.data||[],e.totalSize=t.totalSize||0,0==t.totalSize?e.disabled=!0:e.disabled=!1,e.pageCount=Math.ceil(e.totalSize/e.pageSize)})},reset:function(){this.status="release",this.name="",this.title="",this.urlKey="",this.search()},cratePage:function(){window.open("#/PageCreate","_blank")},editorPage:function(t){window.open("#/PageEditor?urlKey="+t.urlKey,"_blank")},deletePage:function(t){var e=this;this.$confirm("请确认是否删除？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Ct.deletePage({urlKey:t.urlKey}).then(function(t){1==e.tableData.length&&1!=e.page&&(e.page=e.page-1),e.$message({type:"success",message:t.message}),e.search("flg")})}).catch(function(){console.log("取消删除")})},previewPage:function(t){window.open("#/PagePreview?urlKey="+t.urlKey,"_blank")},updatePageStatus:function(t,e){var i=this;1==this.tableData.length&&1!=this.page&&(this.page=this.page-1),this.$confirm("落地页将不可见，如需启用，请重新发布。","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Ct.updatePageStatus({urlKeys:[t.urlKey],status:"offline"}).then(function(t){i.$message({type:"success",message:t.message}),i.search("flg")})}).catch(function(){console.log("取消暂停")})},statusText:function(t){var e="未发布";switch(t.status){case"unrelease":e="未发布";break;case"release":e="已发布";break;case"offline":e="已暂停";break;case"overdue":e="已过期"}return e},formatDate:function(t){return t.needExpire?yt(t.expireDate):"永不过期"},handleSelectionChange:function(t){this.multipleSelection=t},releaseTap:function(){var t=this;if(this.multipleSelection.length>0){var e=[];this.multipleSelection.forEach(function(t){e.push(t.urlKey)},this),e.length==this.tableData.length&&1!=this.page&&(this.page=this.page-1),Ct.updatePageStatus({urlKeys:e,status:"release"}).then(function(e){t.$message({message:"发布已成功",type:"success"}),t.search("flg")})}else this.$message({message:"请选择要发布的选项~",type:"warning"})},selectable:function(t,e){return"offline"===t.status||"unrelease"===t.status},handleSizeChange:function(t){this.pageSize=1*t,this.page=1,this.search("flg")},handleCurrentChange:function(t){this.page=""+t-0,this.search("flg")},copyLink:function(t){var e=window.location.origin+window.location.pathname+"#/landpage?urlKey="+t.urlKey,i=document.createElement("input");i.value=e,document.body.appendChild(i),i.select(),console.log(i.value),document.execCommand("Copy"),this.$message({message:"链接地址已复制成功",type:"success"}),i.remove()},pageEditor:function(t){window.open("#/PageEditor?urlKey="+t.urlKey,"_blank")}},components:{HeadInfo:ot}},kt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("HeadInfo"),t._v(" "),i("div",{staticClass:"query-wraper"},[i("el-row",{staticClass:"maxwidth",attrs:{type:"flex",justify:"space-between"}},[i("el-col",{attrs:{span:5}},[t._v("\n        落地页状态：\n        "),i("el-select",{attrs:{placeholder:"请选择状态"},on:{change:t.search},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[i("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),i("el-option",{attrs:{label:"未发布",value:"unrelease"}}),t._v(" "),i("el-option",{attrs:{label:"已发布",value:"release"}}),t._v(" "),i("el-option",{attrs:{label:"已暂停",value:"offline"}}),t._v(" "),i("el-option",{attrs:{label:"已过期",value:"overdue"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:5}},[t._v("\n        UrlKey：\n        "),i("el-input",{staticClass:"query-search",attrs:{placeholder:"请输入落地页urlKey"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.urlKey,callback:function(e){t.urlKey="string"==typeof e?e.trim():e},expression:"urlKey"}})],1),t._v(" "),i("el-col",{attrs:{span:5}},[t._v("\n        名称：\n        "),i("el-input",{staticClass:"query-search",attrs:{placeholder:"请输入落地页名称"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.name,callback:function(e){t.name="string"==typeof e?e.trim():e},expression:"name"}})],1),t._v(" "),i("el-col",{attrs:{span:5}},[t._v("\n        页面标题：\n        "),i("el-input",{staticClass:"query-search",attrs:{placeholder:"请输入页面标题"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.title,callback:function(e){t.title="string"==typeof e?e.trim():e},expression:"title"}})],1),t._v(" "),i("el-col",{staticClass:"align-right",attrs:{span:4}},[i("el-button",{staticClass:"query-btn",attrs:{type:"primary"},nativeOn:{click:function(e){return t.search(e)}}},[t._v("查 询")]),t._v(" "),i("el-button",{staticClass:"query-btn",attrs:{type:"warning"},nativeOn:{click:function(e){return t.reset(e)}}},[t._v("重 置")])],1)],1)],1),t._v(" "),i("div",{staticClass:"page-list maxwidth"},[i("div",{staticClass:"operate-row"},[i("el-button",{staticClass:"operate-btn",attrs:{type:"success"},nativeOn:{click:function(e){return t.releaseTap(e)}}},[t._v("发 布")]),t._v(" "),i("el-button",{staticClass:"operate-btn",attrs:{type:"primary"},on:{click:t.cratePage}},[t._v("新 建")])],1),t._v(" "),i("el-table",{staticClass:"list-table",attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",selectable:t.selectable,width:"70"}}),t._v(" "),i("el-table-column",{attrs:{prop:"urlKey",label:"urlKey"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"页面标题"}}),t._v(" "),i("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.statusText(e.row))+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"过期日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.formatDate(e.row))+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("formatDateTime")(e.row.createDate))+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"创建人",width:"100"}},[t._v("        \n          运营-张山        \n      ")]),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"operate-btn",on:{click:function(i){return t.copyLink(e.row)}}},[t._v("复制链接")]),t._v(" "),i("span",{staticClass:"operate-btn",on:{click:function(i){return t.pageEditor(e.row)}}},[t._v("编辑")]),t._v(" "),i("span",{staticClass:"operate-btn",on:{click:function(i){return t.previewPage(e.row)}}},[t._v("预览")]),t._v(" "),i("span",{staticClass:"operate-btn operate-delete",on:{click:function(i){return t.deletePage(e.row)}}},[t._v("删除")]),t._v(" "),"release"==e.row.status?i("span",{staticClass:"operate-btn",on:{click:function(i){return t.updatePageStatus(e.row,"offline")}}},[t._v("暂停使用")]):t._e()]}}])})],1),t._v(" "),t.totalSize>0?i("div",{staticClass:"page-box"},[i("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next",total:t.totalSize,disabled:t.disabled,"page-count":t.pageCount,"page-sizes":t.pageSizes},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)],1)},staticRenderFns:[]},bt=i("VU/8")(xt,kt,!1,null,null,null).exports,Tt=i("Dd8w"),Pt=i.n(Tt),$t=(i("FLRp"),i("98VE"),i("GQaK")),St=i("NYxO"),Ut=(i("NoWg"),function(){return new mt.a(function(t){/MicroMessenger/i.test(navigator.userAgent)&&window.wx&&wx.miniProgram?wx.miniProgram.getEnv(function(e){e.miniprogram?t(!0):t(!1)}):t(!1)})}),Bt=function(){var t=window,e=document.documentElement,i=function(){var i;e.style.fontSize=(i=t.innerWidth/375,parseInt(1e4*i*100)/1e4+"px")};t.addEventListener("orientationchange",i,!1),t.addEventListener("resize",i,!1),i()},Lt={name:"Carousel",props:{name:String,id:{type:String,required:!0},type:{type:String,required:!0},slides:{type:Array,default:function(){return[{imageUrl:"",linkType:"page",link:""},{imageUrl:"",linkType:"page",link:""}]}},direction:{type:String,default:"horizontal"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:2500},loop:{tyep:Boolean,default:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375},height:{type:Number,default:300},isChild:{type:Boolean,default:!1},left:Number,top:Number},data:function(){return{staticURL:Ct.staticURL,rem2px:100}},computed:{style:function(){var t="height:"+this.height/100+"rem;";return this.isChild?t+="position:absolute;top:"+this.top/100+"rem;left:"+this.left/100+"rem;\n                width:"+this.width/100+"rem;":(t+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?t+="width:100%;":t+="width:"+this.width/100+"rem;"),t}},methods:{click:function(t){var e=t.linkType;window.landpage_env&&"editor"==landpage_env||!t.link||("page"==e?Ut().then(function(e){e?wx.miniProgram.navigateTo({url:t.link}):alert("当前环境不是小程序端")}):"h5"==e&&(location.href=t.link))}}},Vt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"component-carousel component-view",style:t.style},[i("el-carousel",{attrs:{height:t.height/t.rem2px+"rem",direction:t.direction,loop:t.loop,autoplay:t.autoplay,interval:t.interval}},t._l(t.slides,function(e,n){return i("el-carousel-item",{key:n},[i("img",{attrs:{src:e.imageUrl&&t.staticURL+e.imageUrl||"static/img/blank.png"},on:{click:function(i){return t.click(e)}}})])}),1)],1)},staticRenderFns:[]},Et=i("VU/8")(Lt,Vt,!1,null,null,null).exports,Rt=(i("KAE0"),{name:"Event",props:{id:{type:String,required:!0},type:{type:String,required:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375}},computed:{style:function(){var t="";return t+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?t+="width:100%;":t+="width:"+this.width/100+"rem;",t}},mounted:function(){},methods:{}}),Kt={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"component-event component-view",style:this.style},[this._v("\n  "+this._s(this.$attrs.name)+"\n")])},staticRenderFns:[]},It=i("VU/8")(Rt,Kt,!1,null,null,null).exports,Dt=(i("GnnV"),{name:"Goods",props:{id:{type:String,required:!0},type:{type:String,required:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375}},computed:{style:function(){var t="";return t+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?t+="width:100%;":t+="width:"+this.width/100+"rem;",t}},mounted:function(){},methods:{}}),Ot={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"component-goods component-view",style:this.style},[this._v("\n  "+this._s(this.$attrs.name)+"\n")])},staticRenderFns:[]},Nt=i("VU/8")(Dt,Ot,!1,null,null,null).exports,zt=(i("RJsd"),{name:"Picture",props:{name:String,id:{type:String,required:!0},type:{type:String,required:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375},imageUrl:String,linkType:String,link:String,isChild:{type:Boolean,default:!1},height:Number,left:Number,top:Number},data:function(){return{staticURL:Ct.staticURL}},mounted:function(){},computed:{style:function(){var t="";return this.isChild?t+="position:absolute;top:"+this.top/100+"rem;left:"+this.left/100+"rem;\n                width:"+this.width/100+"rem;height:"+this.height/100+"rem;":(t+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?t+="width:100%;":t+="width:"+this.width/100+"rem;"),t}},methods:{click:function(){var t=this.linkType,e="goods"==t?"pages/goods-details/goods-details?main_goods_id="+this.link:this.link;window.landpage_env&&"editor"==landpage_env||"none"==!this.linkType||("goods"==t||"page"==t?Ut().then(function(t){t?wx.miniProgram.navigateTo({url:e}):alert("当前环境不是小程序端")}):"h5"==t&&(location.href=e))}}}),jt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"component-picture component-view",style:this.style},[e("div",{staticClass:"picture-img",on:{click:this.click}},[e("img",{attrs:{src:this.imageUrl&&this.staticURL+this.imageUrl||"static/img/blank.png"}})])])},staticRenderFns:[]},qt=i("VU/8")(zt,jt,!1,null,null,null).exports,At=(i("YHdu"),{name:"Video",props:{id:{type:String,required:!0},type:{type:String,required:!0},marginTop:{type:Number,default:0},marginBottom:{type:Number,default:0},width:{type:Number,default:375},imageUrl:String,isSwitch:Boolean,videoLink:String,isChild:{type:Boolean,default:!1},height:Number,left:Number,top:Number},data:function(){return{isPlay:!1,staticURL:Ct.staticURL}},computed:{style:function(){var t="";return this.isChild?t+="position:absolute;top:"+this.top/100+"rem;left:"+this.left/100+"rem;width:"+this.width/100+"rem;height:"+this.height/100+"rem;":(t+="margin-top:"+this.marginTop/100+"rem;margin-bottom:"+this.marginBottom/100+"rem;margin-left:auto;margin-right:auto;",375==this.width?t+="width:100%;":t+="width:"+this.width/100+"rem;"),t},posterStyle:function(){var t="";return this.isSwitch&&this.imageUrl&&(t+="background-image:url("+(this.staticURL+this.imageUrl)+")"),t}},methods:{play:function(t){if(this.videoLink){if(!/(\.mp4)$/.test(this.videoLink))return this.$message.error("视频链接必须以.mp4格式结尾");var e=document.querySelector("#video"+this.id);e&&(e.play(),this.isPlay=!0)}else"editor"!=window.landpage_env&&this.$message.error("未添加视频链接！")},playEnd:function(t){this.isPlay=!1}}}),Wt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"component-video component-view",style:t.style},[t.isPlay?t._e():i("div",{staticClass:"video-poster",style:t.posterStyle,on:{click:t.play}},[i("div",{staticClass:"icon-play"})]),t._v(" "),i("video",{attrs:{id:"video"+t.id,src:t.videoLink,controls:""},on:{ended:t.playEnd}})])},staticRenderFns:[]},Mt=i("VU/8")(At,Wt,!1,null,null,null).exports,Ft={props:["dragComponent"],data:function(){return{scrollbar:null,relativeComponent:null,relativeType:""}},computed:Pt()({},Object(St.b)({activeComponent:function(t){return t.activeComponent},components:function(t){return t.page.components},page:function(t){return t.page}}),{style:function(){var t="";return this.page.extra&&this.page.extra.backgroundColor&&(t+="background-color:"+this.page.extra.backgroundColor+";"),t}}),mounted:function(){this.scrollbar=new $t.a("#page-center",{scrollbar:{fade:!1,interactive:!0},click:!0,disableMouse:!1,momentum:!0,mouseWheel:!0,bounce:!1})},methods:{dragover:function(t){t.preventDefault(),console.log("page dragover"),this.resetRelative()},checkDragOver:function(t,e,i){e.preventDefault();var n=e.currentTarget.offsetHeight,a=e.offsetY-this.dragComponent.extra.pointY,o=n-a-this.dragComponent.extra.height,s=e.offsetX-this.dragComponent.extra.pointX;i&&(a+=i.top,o+=i.bottom,s+=i.left),a>=0&&o>=0?"Picture"==t.type&&(this.relativeType="child"):this.relativeType=a<o?"pre":"next",this.relativeComponent=t,this.dragComponent.extra.top=a,this.dragComponent.extra.left=s,this.dragComponent.extra.bottom=o,console.log("top:"+a+",left:"+s+",bottom:"+o,i)},drop:function(t){if(t.preventDefault(),this.dragComponent){var e=Pt()({id:Math.random().toString(32).slice(2)},this.dragComponent);this.$store.commit("setActiveComponent",e),this.relativeComponent&&this.relativeType?(console.log("relativeComponent drop",this.relativeType),"child"==this.relativeType&&(e.isChild=!0,e.width=e.extra.width,e.height=e.extra.height,e.top=e.extra.top,e.left=e.extra.left,e.bottom=e.extra.bottom),delete e.extra,this.$store.commit("addRelativeComponent",{relativeType:this.relativeType,relativeComponent:this.relativeComponent,component:e})):(console.log("page drop"),delete e.extra,this.$store.commit("addComponent",e)),this.$emit("drop"),this.resetRelative()}},setActiveComponent:function(t){this.$store.commit("setActiveComponent",t),this.resetRelative()},removeComponent:function(t){this.$store.commit("removeComponent",t)},contextmenu:function(t){var e=t.clientX,i=t.clientY;this.$store.commit("showContextMenu",{left:e,top:i})},resetRelative:function(){this.relativeComponent=null,this.relativeType=""}},components:{Carousel:Et,Event:It,Goods:Nt,Picture:qt,Video:Mt}},Ht={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-wraper",style:t.style,on:{dragover:t.dragover,drop:t.drop}},t._l(t.components,function(e){return i("div",{key:e.id,class:"component-wraper"},[i(e.type,t._b({tag:"component",class:(e.id==t.activeComponent.id?"active":"")+" "+(t.relativeComponent&&t.relativeComponent.id==e.id?"hover-"+t.relativeType:""),nativeOn:{contextmenu:function(e){return e.preventDefault(),t.contextmenu(e)},mousedown:function(i){return t.setActiveComponent(e)},dragover:function(i){return i.stopPropagation(),t.checkDragOver(e,i)}}},"component",e,!1)),t._v(" "),t._l(e.children,function(n){return i(n.type,t._b({key:n.id,tag:"component",class:"component-child "+(n.id==t.activeComponent.id?"active":""),nativeOn:{contextmenu:function(e){return e.preventDefault(),t.contextmenu(e)},mousedown:function(e){return t.setActiveComponent(n)},dragover:function(i){return i.stopPropagation(),t.checkDragOver(e,i,n)}}},"component",n,!1))})],2)}),0)},staticRenderFns:[]},Gt=i("VU/8")(Ft,Ht,!1,null,null,null).exports,Jt=(i("lxJj"),{name:"CarouselSet",props:{component:{type:Object,required:!0}},data:function(){var t={};return this.initProps(t),Pt()({viewWidth:375,loading:!1,uploadUrl:Ct.uploadURL,staticURL:Ct.staticURL,currentIndex:0},t)},watch:{"component.id":function(t,e){e&&t&&e!==t&&this.initProps(this)},slides:{handler:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"slides",newVal:t})},deep:!0},direction:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"direction",newVal:t})},autoplay:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"autoplay",newVal:t})},interval:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"interval",newVal:t})},loop:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"loop",newVal:t})},width:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:t})},marginTop:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:t})},marginBottom:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:t})},height:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"height",newVal:t})},top:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"top",newVal:t})},left:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"left",newVal:t})}},methods:{initProps:function(t){t.direction=this.component.direction||"horizontal",t.autoplay=this.component.autoplay||!0,t.interval=this.component.interval||2500,t.loop=this.component.loop||!0,t.slides=this.component.slides||[{imageUrl:"",linkType:"page",link:""},{imageUrl:"",linkType:"page",link:""}],t.width=this.component.width||375,t.height=this.component.height||300,t.marginTop=this.component.marginTop||0,t.marginBottom=this.component.marginBottom||0,t.top=this.component.top,t.left=this.component.left},addSlide:function(){this.slides.push({imageUrl:"",linkType:"page",link:""})},moveSlide:function(t,e){var i=this.slides[t];switch(e){case"pre":0!=t&&(this.slides.splice(t,1),this.slides.splice(t-1,0,i));break;case"next":t!=this.slides.length-1&&(this.slides.splice(t,1),this.slides.splice(t+1,0,i))}},deleteSlide:function(t){if(1==this.slides.length)return this.$message.error("至少保留一项轮播图！");this.slides.splice(t,1)},beforeUpload:function(t,e){return t.size/1024/1024<=1?(this.currentIndex=e,this.loading=!0,!0):(this.$alert("图片最大不能超过1MB，请调整后，重新上传！","请重新上传",{confirmButtonText:"OK",showClose:!1}),!1)},uploadSuccess:function(t,e,i){console.log(arguments),this.loading=!1,this.slides[i].imageUrl=t.data.path,this.$message.success("上传图片成功！")},uploadError:function(t,e){this.loading=!1,this.$message.error("上传图片失败："+t)}}}),Xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"carousel-set"},[i("div",{staticClass:"border-wraper mb20"},[i("div",{staticClass:"setting-carousels"},[t._l(t.slides,function(e,n){return i("div",{key:n,staticClass:"carousels-item"},[i("div",{staticClass:"item-img"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loading&&t.currentIndex==n,expression:"loading&&currentIndex==index"}],staticClass:"img-uploader",attrs:{name:"picture",action:t.uploadUrl,accept:"image/*","show-file-list":!1,"on-success":function(e,i){t.uploadSuccess(e,i,n)},"on-error":t.uploadError,"before-upload":function(e){t.beforeUpload(e,n)}}},[i("img",{staticClass:"img-preview",attrs:{src:e.imageUrl&&t.staticURL+e.imageUrl||"static/img/blank.png"}})])],1),t._v(" "),i("div",{staticClass:"item-attrs"},[i("div",{staticClass:"attr-wraper"},[i("div",{staticClass:"attr-name"},[t._v("链接类型：")]),t._v(" "),i("div",{staticClass:"attr-value"},[i("el-radio",{attrs:{label:"page"},model:{value:e.linkType,callback:function(i){t.$set(e,"linkType",i)},expression:"item.linkType"}},[t._v("小程序页面")]),t._v(" "),i("el-radio",{attrs:{label:"h5"},model:{value:e.linkType,callback:function(i){t.$set(e,"linkType",i)},expression:"item.linkType"}},[t._v("H5链接")])],1)]),t._v(" "),i("div",{staticClass:"attr-wraper"},["page"==e.linkType?[i("el-input",{attrs:{type:"text",placeholder:"请输入小程序页面路径"},model:{value:e.link,callback:function(i){t.$set(e,"link",i)},expression:"item.link"}})]:[i("el-input",{attrs:{type:"text",placeholder:"请输入H5链接地址"},model:{value:e.link,callback:function(i){t.$set(e,"link",i)},expression:"item.link"}})]],2)]),t._v(" "),i("div",{staticClass:"item-operate"},[i("i",{staticClass:"el-icon-close",attrs:{title:"删除"},on:{click:function(e){return t.deleteSlide(n)}}}),t._v(" "),i("i",{staticClass:"el-icon-sort-up",attrs:{title:"上移"},on:{click:function(e){return t.moveSlide(n,"pre")}}}),t._v(" "),i("i",{staticClass:"el-icon-sort-down",attrs:{title:"下移"},on:{click:function(e){return t.moveSlide(n,"next")}}})])])}),t._v(" "),i("div",{staticClass:"carousels-add align-center",on:{click:t.addSlide}},[t._m(0),t._v(" "),i("div",{staticClass:"tip-info"},[t._v("图片上传支持jpg/jpeg/png/gif格式，最大不能超过1MB")])])],2)]),t._v(" "),i("div",{staticClass:"border-wraper mb20"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("滚动方向：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-radio",{attrs:{label:"horizontal"},model:{value:t.direction,callback:function(e){t.direction=e},expression:"direction"}},[t._v("横向")]),t._v(" "),i("el-radio",{attrs:{label:"vertical"},model:{value:t.direction,callback:function(e){t.direction=e},expression:"direction"}},[t._v("竖向")])],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("自动轮播：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:t.autoplay,callback:function(e){t.autoplay=e},expression:"autoplay"}})],1)],1),t._v(" "),t.autoplay?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("轮播间隔：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:1e4,min:100,"show-tooltip":!1,step:100},model:{value:t.interval,callback:function(e){t.interval=e},expression:"interval"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.interval)+"ms")])],1)],1)],1):t._e(),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("循环切换：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:t.loop,callback:function(e){t.loop=e},expression:"loop"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"border-wraper"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("宽度：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,min:100,"show-tooltip":!1},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.width)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("高度：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,min:100,"show-tooltip":!1},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.height)+"px")])],1)],1)],1),t._v(" "),t.component.isChild?[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,"show-tooltip":!1},model:{value:t.top,callback:function(e){t.top=e},expression:"top"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.top)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("左边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,"show-tooltip":!1},model:{value:t.left,callback:function(e){t.left=e},expression:"left"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.left)+"px")])],1)],1)],1)]:[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginTop,callback:function(e){t.marginTop=e},expression:"marginTop"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginTop)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("下边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginBottom,callback:function(e){t.marginBottom=e},expression:"marginBottom"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginBottom)+"px")])],1)],1)],1)]],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addbtn"},[e("i",{staticClass:"el-icon-plus"}),this._v(" 添加轮播图片")])}]},Yt=i("VU/8")(Jt,Xt,!1,null,null,null).exports,Zt={props:{component:{type:Object,required:!0}},data:function(){var t={};return this.initProps(t),Pt()({viewWidth:375},t)},watch:{"component.id":function(t,e){e&&t&&e!==t&&this.initProps(this)},width:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:t})},marginTop:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:t})},marginBottom:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:t})}},methods:{initProps:function(t){t.marginTop=this.component.marginTop||0,t.marginBottom=this.component.marginBottom||0,t.width=this.component.width||375,console.log("初始化图片组件参数",t)}}},Qt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"event-set"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("宽度：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,min:100,"show-tooltip":!1},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.width)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginTop,callback:function(e){t.marginTop=e},expression:"marginTop"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginTop)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("下边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginBottom,callback:function(e){t.marginBottom=e},expression:"marginBottom"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginBottom)+"px")])],1)],1)],1)],1)},staticRenderFns:[]},te=i("VU/8")(Zt,Qt,!1,null,null,null).exports,ee={props:{component:{type:Object,required:!0}},data:function(){var t={};return this.initProps(t),Pt()({viewWidth:375},t)},watch:{"component.id":function(t,e){e&&t&&e!==t&&this.initProps(this)},width:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:t})},marginTop:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:t})},marginBottom:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:t})}},methods:{initProps:function(t){t.marginTop=this.component.marginTop||0,t.marginBottom=this.component.marginBottom||0,t.width=this.component.width||375,console.log("初始化图片组件参数",t)}}},ie={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods-set"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("宽度：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,min:100,"show-tooltip":!1},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.width)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginTop,callback:function(e){t.marginTop=e},expression:"marginTop"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginTop)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("下边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginBottom,callback:function(e){t.marginBottom=e},expression:"marginBottom"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginBottom)+"px")])],1)],1)],1)],1)},staticRenderFns:[]},ne=i("VU/8")(ee,ie,!1,null,null,null).exports,ae={name:"PictureSet",props:{component:{type:Object,required:!0}},data:function(){var t={};return this.initProps(t),Pt()({viewWidth:375,goodsLink:"",pageLink:"",h5Link:"",loading:!1,uploadUrl:Ct.uploadURL,staticURL:Ct.staticURL},t)},watch:{"component.id":function(t,e){e&&t&&e!==t&&this.initProps(this)},imageUrl:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"imageUrl",newVal:t})},linkType:function(t,e){var i="";switch(this.$store.commit("setComponentProp",{id:this.component.id,prop:"linkType",newVal:t}),t){case"goods":i=this.goodsLink;break;case"page":i=this.pageLink;break;case"h5":i=this.h5Link;break;case"none":i=""}this.$store.commit("setComponentProp",{id:this.component.id,prop:"link",newVal:i}),this.link=i},goodsLink:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"link",newVal:t}),this.link=t},pageLink:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"link",newVal:t}),this.link=t},h5Link:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"link",newVal:t}),this.link=t},width:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:t})},marginTop:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:t})},marginBottom:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:t})},height:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"height",newVal:t})},top:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"top",newVal:t})},left:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"left",newVal:t})}},methods:{initProps:function(t){switch(t.imageUrl=this.component.imageUrl,t.linkType=this.component.linkType||"none",t.link=this.component.link||"",t.linkType){case"goods":t.goodsLink=t.link;break;case"page":t.pageLink=t.link;break;case"h5":t.h5Link=t.link}t.width=this.component.width||375,t.marginTop=this.component.marginTop||0,t.marginBottom=this.component.marginBottom||0,t.height=this.component.height,t.top=this.component.top,t.left=this.component.left},beforeUpload:function(t){return t.size/1024/1024<=1?(this.loading=!0,!0):(this.$alert("图片最大不能超过1MB，请调整后，重新上传！","请重新上传",{confirmButtonText:"OK",showClose:!1}),!1)},uploadSuccess:function(t,e){this.loading=!1,this.imageUrl=t.data.path,this.$message.success("上传图片成功！")},uploadError:function(t,e){this.loading=!1,this.$message.error("上传图片失败："+t)}}},oe={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"picture-set"},[i("div",{staticClass:"border-wraper mb20"},[i("el-row",{staticClass:"setting-item nomargin-bottom",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上传图片：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"img-uploader",attrs:{name:"picture",action:t.uploadUrl,accept:"image/*","show-file-list":!1,"on-success":t.uploadSuccess,"on-error":t.uploadError,"before-upload":t.beforeUpload}},[i("img",{staticClass:"img-preview",attrs:{src:t.imageUrl&&t.staticURL+t.imageUrl||"static/img/blank.png"}})])],1)],1),t._v(" "),i("div",{staticClass:"tip-info align-center"},[t._v("图片上传支持jpg/jpeg/png/gif格式，最大不能超过1MB")])],1),t._v(" "),i("div",{staticClass:"border-wraper mb20"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("链接类型：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-radio",{attrs:{label:"goods"},model:{value:t.linkType,callback:function(e){t.linkType=e},expression:"linkType"}},[t._v("商品")]),t._v(" "),i("el-radio",{attrs:{label:"page"},model:{value:t.linkType,callback:function(e){t.linkType=e},expression:"linkType"}},[t._v("页面")]),t._v(" "),i("el-radio",{attrs:{label:"h5"},model:{value:t.linkType,callback:function(e){t.linkType=e},expression:"linkType"}},[t._v("H5链接")]),t._v(" "),i("el-radio",{attrs:{label:"none"},model:{value:t.linkType,callback:function(e){t.linkType=e},expression:"linkType"}},[t._v("无")])],1)],1),t._v(" "),"goods"==t.linkType?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("小程序商品：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入商品ID"},model:{value:t.goodsLink,callback:function(e){t.goodsLink=e},expression:"goodsLink"}})],1)],1):t._e(),t._v(" "),"page"==t.linkType?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("小程序页面:")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入小程序页面路径"},model:{value:t.pageLink,callback:function(e){t.pageLink=e},expression:"pageLink"}})],1)],1):t._e(),t._v(" "),"h5"==t.linkType?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("H5链接:")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入H5链接地址"},model:{value:t.h5Link,callback:function(e){t.h5Link=e},expression:"h5Link"}})],1)],1):t._e()],1),t._v(" "),i("div",{staticClass:"border-wraper"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("宽度：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,min:100,"show-tooltip":!1},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.width)+"px")])],1)],1)],1),t._v(" "),t.component.isChild?[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("高度：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,min:100,"show-tooltip":!1},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.height)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,"show-tooltip":!1},model:{value:t.top,callback:function(e){t.top=e},expression:"top"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.top)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("左边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,"show-tooltip":!1},model:{value:t.left,callback:function(e){t.left=e},expression:"left"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.left)+"px")])],1)],1)],1)]:[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginTop,callback:function(e){t.marginTop=e},expression:"marginTop"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginTop)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("下边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginBottom,callback:function(e){t.marginBottom=e},expression:"marginBottom"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginBottom)+"px")])],1)],1)],1)]],2)])},staticRenderFns:[]},se=i("VU/8")(ae,oe,!1,null,null,null).exports,le={props:{component:{type:Object,required:!0}},data:function(){var t={};this.$store.state.page;return this.initProps(t),Pt()({viewWidth:375,loading:!1,staticURL:Ct.staticURL,uploadUrl:Ct.uploadURL},t)},watch:{"component.id":function(t,e){e&&t&&e!==t&&this.initProps(this)},imageUrl:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"imageUrl",newVal:t})},isSwitch:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"isSwitch",newVal:t})},width:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"width",newVal:t})},marginTop:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginTop",newVal:t})},marginBottom:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"marginBottom",newVal:t})},videoLink:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"videoLink",newVal:t})},height:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"height",newVal:t})},top:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"top",newVal:t})},left:function(t,e){this.$store.commit("setComponentProp",{id:this.component.id,prop:"left",newVal:t})}},methods:{initProps:function(t){t.imageUrl=this.component.imageUrl||"",t.videoLink=this.component.videoLink||"",t.marginTop=this.component.marginTop||0,t.marginBottom=this.component.marginBottom||0,t.width=this.component.width||375,t.isSwitch=this.component.isSwitch||!1,t.height=this.component.height,t.top=this.component.top,t.left=this.component.left},beforeUpload:function(t){return t.size/1024/1024<=1?(this.loading=!0,!0):(this.$alert("图片最大不能超过1MB，请调整后，重新上传！","请重新上传",{confirmButtonText:"OK",showClose:!1}),!1)},uploadProgress:function(t,e){console.log(t,"上传中")},uploadSuccess:function(t,e){this.loading=!1,this.imageUrl=t.data.path,this.$message.success("上传图片成功！")},uploadError:function(t,e){this.loading=!1,this.$message.error("上传图片失败："+t)}}},re={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-set"},[i("div",{staticClass:"border-wraper mb20"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("视频链接：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入视频链接地址"},model:{value:t.videoLink,callback:function(e){t.videoLink="string"==typeof e?e.trim():e},expression:"videoLink"}})],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上传封面：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:t.isSwitch,callback:function(e){t.isSwitch=e},expression:"isSwitch"}})],1)],1),t._v(" "),t.isSwitch?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[t._v("*")]),t._v(" 上传封面：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"img-uploader",attrs:{name:"picture",action:t.uploadUrl,accept:"image/*","show-file-list":!1,"on-success":t.uploadSuccess,"on-progress":t.uploadProgress,"on-error":t.uploadError,"before-upload":t.beforeUpload}},[i("img",{staticClass:"img-preview",attrs:{src:t.imageUrl&&t.staticURL+t.imageUrl||"static/img/blank.png"}})])],1)],1):t._e(),t._v(" "),t.isSwitch?i("div",{staticClass:"tip-info align-center"},[t._v("图片上传支持jpg/jpeg/png/gif格式，最大不能超过1MB")]):t._e()],1),t._v(" "),i("div",{staticClass:"border-wraper mb20"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("宽 度：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,min:100,"show-tooltip":!1},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.width)+"px")])],1)],1)],1),t._v(" "),t.component.isChild?[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("高度：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,min:100,"show-tooltip":!1},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.height)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,"show-tooltip":!1},model:{value:t.top,callback:function(e){t.top=e},expression:"top"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.top)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("左边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:t.viewWidth,"show-tooltip":!1},model:{value:t.left,callback:function(e){t.left=e},expression:"left"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.left)+"px")])],1)],1)],1)]:[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("上边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginTop,callback:function(e){t.marginTop=e},expression:"marginTop"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginTop)+"px")])],1)],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("下边距：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",[i("el-slider",{attrs:{max:100,"show-tooltip":!1},model:{value:t.marginBottom,callback:function(e){t.marginBottom=e},expression:"marginBottom"}})],1),t._v(" "),i("el-col",{staticClass:"value-right"},[t._v(t._s(t.marginBottom)+"px")])],1)],1)],1)]],2)])},staticRenderFns:[]},ce=i("VU/8")(le,re,!1,null,null,null).exports,pe={data:function(){var t=this.$store.state.page;return{name:t.name,title:t.title,urlKey:t.urlKey,needExpire:t.needExpire,expireDate:t.expireDate,extra:{backgroundColor:t.extra.backgroundColor,needBackTop:t.extra.needBackTop,backTopImage:t.extra.backTopImage,needShare:t.extra.needShare,shareText:t.extra.shareText,shareImage:t.extra.shareImage},pickerOptions:{disabledDate:function(t){var e=Date.now();return t.getTime()<e}},isEditor:"/PageEditor"==this.$route.path,loading:!1,uploadUrl:Ct.uploadURL,staticURL:Ct.staticURL}},watch:{urlKey:function(t,e){this.$store.commit("setPageProp",{prop:"urlKey",newVal:t})},name:function(t,e){this.$store.commit("setPageProp",{prop:"name",newVal:t})},title:function(t,e){this.$store.commit("setPageProp",{prop:"title",newVal:t})},"extra.backgroundColor":function(t,e){this.$store.commit("setPageProp",{prop:"extra.backgroundColor",newVal:t,multi:!0})},"extra.needBackTop":function(t,e){this.$store.commit("setPageProp",{prop:"extra.needBackTop",newVal:t,multi:!0}),t?this.$store.commit("setPageProp",{prop:"extra.backTopImage",newVal:this.extra.backTopImage,multi:!0}):this.$store.commit("setPageProp",{prop:"extra.backTopImage",newVal:"",multi:!0})},"extra.backTopImage":function(t,e){this.$store.commit("setPageProp",{prop:"extra.backTopImage",newVal:t,multi:!0})},"extra.needShare":function(t,e){this.$store.commit("setPageProp",{prop:"extra.needShare",newVal:t,multi:!0}),t?(this.$store.commit("setPageProp",{prop:"extra.shareText",newVal:this.extra.shareText,multi:!0}),this.$store.commit("setPageProp",{prop:"extra.shareImage",newVal:this.extra.shareImage,multi:!0})):(this.$store.commit("setPageProp",{prop:"extra.shareText",newVal:"",multi:!0}),this.$store.commit("setPageProp",{prop:"extra.shareImage",newVal:"",multi:!0}))},"extra.shareText":function(t,e){this.$store.commit("setPageProp",{prop:"extra.shareText",newVal:t,multi:!0})},"extra.shareImage":function(t,e){console.log(t,e),this.$store.commit("setPageProp",{prop:"extra.shareImage",newVal:t,multi:!0})},needExpire:function(t,e){this.$store.commit("setPageProp",{prop:"needExpire",newVal:t}),t?this.$store.commit("setPageProp",{prop:"expireDate",newVal:this.expireDate}):this.$store.commit("setPageProp",{prop:"expireDate",newVal:""})},expireDate:function(t,e){this.$store.commit("setPageProp",{prop:"expireDate",newVal:t})}},computed:Pt()({},Object(St.b)({activeComponent:function(t){return t.activeComponent},page:function(t){return t.page}})),methods:{beforeUploadShare:function(t){var e=this;return t.size/1024/1024<=1?new mt.a(function(i,n){var a=window.URL||window.webkitURL,o=new Image;o.onload=function(){o.width==o.height&&o.width<=800?(e.loading=!0,i()):(e.$alert("图片需为正方形，且最大尺寸不超过800x800，请重新上传！","上传失败",{confirmButtonText:"OK",showClose:!1}),n())},o.src=a.createObjectURL(t)}):(this.$alert("上传图片大小不能超过 1MB！","上传失败",{confirmButtonText:"OK",showClose:!1}),!1)},uploadSuccessShare:function(t,e){this.loading=!1,this.extra.shareImage=t.data.path,this.$message.success("分享图片上传成功！",e)},beforeUploadBackTop:function(t){return t.size/1024/1024<=1?this.loading=!0:(this.$alert("上传图片大小不能超过 1MB！","上传失败",{confirmButtonText:"OK",showClose:!1}),!1)},uploadSuccessBackTop:function(t,e){this.loading=!1,this.extra.backTopImage=t.data.path,this.$message.success("返回顶部图标上传成功！",e)},uploadError:function(t,e){this.loading=!1,this.$message.error("上传图片失败："+t)}},components:{CarouselSet:Yt,EventSet:te,GoodsSet:ne,PictureSet:se,VideoSet:ce}},me={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full-container"},[i("div",{staticClass:"component-name"},[t._v(t._s(this.activeComponent.name)+t._s("page"==this.activeComponent.type?"":"组件")+"设置")]),t._v(" "),"page"==this.activeComponent.type?i("div",{staticClass:"page-set"},[i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[t._v("*")]),t._v(" URLKey：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",disabled:t.isEditor,placeholder:"请输入唯一的英文、数字或下划线组合"},model:{value:t.urlKey,callback:function(e){t.urlKey=e},expression:"urlKey"}})],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[t._v("*")]),t._v(" 落地页名称：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入落地页名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[t._v("*")]),t._v(" 页面标题：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入页面标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("页面底色：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.extra.backgroundColor,callback:function(e){t.$set(t.extra,"backgroundColor",e)},expression:"extra.backgroundColor"}})],1)],1),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("有效期：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:t.needExpire,callback:function(e){t.needExpire=e},expression:"needExpire"}})],1)],1),t._v(" "),t.needExpire?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[t._v("*")]),t._v(" 有效期至：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-date-picker",{attrs:{"picker-options":t.pickerOptions,type:"datetime",align:"right","value-format":"timestamp",placeholder:"请选择日期时间"},model:{value:t.expireDate,callback:function(e){t.expireDate=e},expression:"expireDate"}})],1)],1):t._e(),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("自定义分享：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:t.extra.needShare,callback:function(e){t.$set(t.extra,"needShare",e)},expression:"extra.needShare"}})],1)],1),t._v(" "),t.extra.needShare?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[t._v("*")]),t._v(" 分享标题：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-input",{attrs:{type:"text",placeholder:"请输入分享标题，建议15个汉字左右"},model:{value:t.extra.shareText,callback:function(e){t.$set(t.extra,"shareText",e)},expression:"extra.shareText"}})],1)],1):t._e(),t._v(" "),t.extra.needShare?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[t._v("*")]),t._v(" 分享图片：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"img-uploader",attrs:{name:"picture",action:t.uploadUrl,accept:"image/*","show-file-list":!1,"on-success":t.uploadSuccessShare,"on-error":t.uploadError,"before-upload":t.beforeUploadShare}},[i("img",{staticClass:"share-image",attrs:{src:t.extra.shareImage&&t.staticURL+t.extra.shareImage||"static/img/blank.png"}})]),t._v(" "),i("div",{staticClass:"tip-info"},[t._v("图片需为正方形，且最大不能超过800px")])],1)],1):t._e(),t._v(" "),i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[t._v("返回顶部功能：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-switch",{model:{value:t.extra.needBackTop,callback:function(e){t.$set(t.extra,"needBackTop",e)},expression:"extra.needBackTop"}})],1)],1),t._v(" "),t.extra.needBackTop?i("el-row",{staticClass:"setting-item",attrs:{type:"flex",align:"middle"}},[i("el-col",{staticClass:"item-name"},[i("span",{staticClass:"required"},[t._v("*")]),t._v(" 返回顶部图标：")]),t._v(" "),i("el-col",{staticClass:"item-value"},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"img-uploader",attrs:{name:"picture",action:t.uploadUrl,accept:"image/*","show-file-list":!1,"on-success":t.uploadSuccessBackTop,"on-error":t.uploadError,"before-upload":t.beforeUploadBackTop}},[i("img",{staticClass:"backtop-image",attrs:{src:t.extra.backTopImage&&t.staticURL+t.extra.backTopImage||"static/img/blank.png"}})])],1)],1):t._e()],1):i("div",{staticClass:"componet-set"},[i(t.activeComponent.type+"Set",{tag:"component",attrs:{component:t.activeComponent}})],1)])},staticRenderFns:[]},ue=i("VU/8")(pe,me,!1,null,null,null).exports,de=(i("B6MJ"),{name:"ContextMenu",computed:Pt()({},Object(St.b)({components:function(t){return t.page.components},activeComponent:function(t){return t.activeComponent},contextMenu:function(t){return t.contextMenu},isChild:function(t){return t.activeComponent.isChild}}),{style:function(){var t="";return t+="top:"+(this.contextMenu.top-2)+"px; left:"+(this.contextMenu.left-5)+"px; display:"+(this.contextMenu.show?"block":"none")+";",t},hasLevel:function(){var t=this;if(this.isChild)for(var e=0;e<this.components.length;e++){if(this.components[e].children)if(-1!=this.components[e].children.findIndex(function(e){return e.id==t.activeComponent.id})&&this.components[e].children.length>1)return!0}return!1}}),mounted:function(){},methods:{removeComponent:function(){this.activeComponent&&"page"!=this.activeComponent.type&&this.$store.commit("removeComponent",this.activeComponent)},updateIndex:function(t){this.$store.commit("updateComponentIndex",{component:this.activeComponent,type:t})},updateLevel:function(t){this.$store.commit("updateComponentLevel",{component:this.activeComponent,type:t})},mouseleave:function(){this.$store.state.contextMenu.show=!1}}}),he={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"component-contextmenu",style:t.style,on:{mouseleave:t.mouseleave}},[t.isChild?[i("div",{staticClass:"contextmenu-item",on:{click:t.removeComponent}},[t._v("删除")]),t._v(" "),t.hasLevel?[i("div",{staticClass:"contextmenu-item",on:{click:function(e){return t.updateLevel("pre")}}},[t._v("上一层")]),t._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(e){return t.updateLevel("next")}}},[t._v("下一层")])]:t._e()]:[i("div",{staticClass:"contextmenu-item",on:{click:t.removeComponent}},[t._v("删除")]),t._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(e){return t.updateIndex("pre")}}},[t._v("上移")]),t._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(e){return t.updateIndex("next")}}},[t._v("下移")]),t._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(e){return t.updateIndex("top")}}},[t._v("置顶")]),t._v(" "),i("div",{staticClass:"contextmenu-item",on:{click:function(e){return t.updateIndex("bottom")}}},[t._v("置底")])]],2)},staticRenderFns:[]},ge=i("VU/8")(de,he,!1,null,null,null).exports,ve=(i("dJ7j"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-row",{staticClass:"breadcrumb-wraper",attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("el-col",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[this._v("落地页列表")]),this._v(" "),e("el-breadcrumb-item",[this._v(this._s(this.$route.meta.title))])],1)],1),this._v(" "),e("el-col",[this._t("default")],2)],1)},staticRenderFns:[]}),fe=i("VU/8")({name:"BreadCrumb",data:function(){return{}},mounted:function(){},methods:{}},ve,!1,null,null,null).exports,Ce={name:"PageCreate",data:function(){return{components:gt,dragComponent:null,isEditor:"/PageEditor"==this.$route.path,staticURL:Ct.staticURL}},computed:Pt()({},Object(St.b)({activeComponent:function(t){return t.activeComponent},page:function(t){return t.page}}),{showBtn:function(){return!this.isEditor||"release"!=this.page.status}}),beforeCreate:function(){var t=this;document.addEventListener("mousedown",function(e){var i=e.target;(i.classList.contains("custom-page")||i.classList.contains("page-wraper")||i.classList.contains("component-wraper"))&&t.$store.commit("resetActiveComponent")})},methods:{dragstart:function(t,e){t.extra={width:e.currentTarget.offsetWidth,height:e.currentTarget.offsetHeight,pointX:e.offsetX,pointY:e.offsetY},this.dragComponent=t,this.$store.commit("resetActiveComponent"),e.dataTransfer.setData("type",t.type),e.dataTransfer.effectAllowed="copy"},drop:function(){this.dragComponent=null},save:function(){var t=this;this.validate()&&(this.isEditor?Ct.savePage:Ct.createPage).call(Ct,Pt()({},this.$store.state.page)).then(function(e){t.$alert("保存成功，即将跳转到列表页面！","保存成功",{confirmButtonText:"OK",showClose:!1,callback:function(e){t.$router.push({path:"/"})}})}).catch(function(e){t.$store.commit("resetActiveComponent")})},preview:function(){var t=this;this.validate()&&(this.isEditor?Ct.savePage:Ct.createPage).call(Ct,Pt()({},this.$store.state.page)).then(function(e){t.$alert("保存成功，即将跳转到预览页面！","保存成功",{confirmButtonText:"OK",showClose:!1,callback:function(e){t.$router.push({path:"/PagePreview?urlKey="+t.$store.state.page.urlKey})}})}).catch(function(e){t.$store.commit("resetActiveComponent")})},release:function(){var t=this;this.validate()&&(this.isEditor?Ct.savePage:Ct.createPage).call(Ct,Pt()({},this.$store.state.page,{status:"release"})).then(function(e){t.$alert("保存并发布成功，即将跳转到列表页面！","发布成功",{confirmButtonText:"OK",showClose:!1,callback:function(e){t.$router.push({path:"/"})}})}).catch(function(e){t.$store.commit("resetActiveComponent")})},validate:function(){var t=this.page,e=this.activeComponent;if("page"==e.type){if(!this.validatePage(t))return!1;for(var i=0;i<t.components.length;i++)if(!this.validateComponent(t.components[i]))return this.$store.commit("setActiveComponent",t.components[i]),!1}else{if(!this.validateComponent(e))return!1;for(var n=0;n<t.components.length;n++){if(!this.validateComponent(t.components[n]))return this.$store.commit("setActiveComponent",t.components[n]),!1;for(var a=0;t.components[n].children&&a<t.components[n].children.length;a++)if(!this.validateComponent(t.components[n].children[a]))return this.$store.commit("setActiveComponent",t.components[n].children[a]),!1}if(!this.validatePage(t))return this.$store.commit("resetActiveComponent"),!1}return!0},validatePage:function(t){if(wt(t.urlKey))return this.$message({type:"error",message:"页面组件-请填写URLKey!"}),!1;if(!_t(t.urlKey))return this.$message({type:"error",message:"页面组件-请填写正确的URLKey!"}),!1;if(wt(t.name))return this.$message({type:"error",message:"页面组件-请填写落地页名称!"}),!1;if(wt(t.title))return this.$message({type:"error",message:"页面组件-请填写页面标题!"}),!1;if(t.needExpire){if(!t.expireDate)return this.$message({type:"error",message:"页面组件-请选择有效期时间！"}),!1;if(t.expireDate<=Date.now())return this.$message({type:"error",message:"页面组件-有效期已过期，请重新选择！"}),!1}if(t.extra.needShare){if(!t.extra.shareText.trim())return this.$message({type:"error",message:"页面组件-请填写分享标题！"}),!1;if(!t.extra.shareImage.trim())return this.$message({type:"error",message:"页面组件-请上传分享图片！"}),!1}return!(t.extra.needBackTop&&!t.extra.backTopImage)||(this.$message({type:"error",message:"页面组件-请上传返回顶部图标！"}),!1)},validateComponent:function(t){var e="";switch(t.type){case"Picture":if(wt(t.imageUrl))return this.$message({type:"error",message:"图片组件-请上传图片！"}),!1;if("goods"==t.linkType&&wt(t.link))return e="图片组件-请填写小程序商品ID！",this.$message({type:"error",message:e}),!1;if("page"==t.linkType&&wt(t.link))return e="图片组件-请填写小程序页面路径！",this.$message({type:"error",message:e}),!1;if("h5"==t.linkType&&wt(t.link))return e="图片组件-请填写H5链接地址！",this.$message({type:"error",message:e}),!1;break;case"Video":if(wt(t.videoLink))return this.$message({type:"error",message:"请填写视频链接地址！"}),!1;if(t.isSwitch&&wt(t.imageUrl))return this.$message({type:"error",message:"请上传封面图片！"}),!1}return!0},iconClass:function(t){var e="";switch(t){case"Picture":e="el-icon-picture";break;case"Carousel":e="el-icon-s-grid";break;case"Video":e="el-icon-film";break;case"Goods":e="el-icon-goods";break;case"Event":e="el-icon-thumb";break;default:e="el-icon-chicken"}return e}},components:{pageCenter:Gt,pageRight:ue,ContextMenu:ge,HeadInfo:ot,BreadCrumb:fe}},we={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-create full-container"},[i("HeadInfo"),t._v(" "),i("BreadCrumb",[i("div",{staticClass:"operate-btns"},[i("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:t.save}},[t._v("保存")]),t._v(" "),t.showBtn?i("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:t.preview}},[t._v("保存并预览")]):t._e(),t._v(" "),t.showBtn?i("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.release}},[t._v("保存并发布")]):t._e()],1)]),t._v(" "),i("el-row",{staticClass:"custom-page",attrs:{type:"flex",justify:"space-between"}},[i("el-col",{staticClass:"page-left"},[i("div",{staticClass:"component-cate"},[t._v("基础组件")]),t._v(" "),i("el-row",{staticClass:"component-list",attrs:{type:"flex"}},t._l(t.components.base,function(e){return i("el-col",{key:e.type,staticClass:"component-item",attrs:{draggable:!e.disableDrag},nativeOn:{dragstart:function(i){return t.dragstart(e,i)}}},[i("i",{class:"item-icon "+t.iconClass(e.type)}),t._v(" "),i("div",{staticClass:"item-name"},[t._v(t._s(e.name))])])}),1),t._v(" "),i("div",{staticClass:"component-cate"},[t._v("营销组件")]),t._v(" "),i("el-row",{staticClass:"compoonet-list",attrs:{type:"flex"}},t._l(t.components.market,function(e){return i("el-col",{key:e.type,staticClass:"component-item",attrs:{draggable:!e.disableDrag},nativeOn:{dragstart:function(i){return t.dragstart(e,i)}}},[i("i",{class:"item-icon "+t.iconClass(e.type)}),t._v(" "),i("div",{staticClass:"item-name"},[t._v(t._s(e.name))])])}),1)],1),t._v(" "),i("el-col",{staticClass:"page-center",attrs:{id:"page-center"}},[i("pageCenter",{attrs:{dragComponent:t.dragComponent},on:{drop:t.drop}}),t._v(" "),0==t.page.components.length?i("div",{staticClass:"page-empty"},[t._v("请拖入左侧组件到此区域")]):t._e(),t._v(" "),t.page.extra.needBackTop&&t.page.extra.backTopImage?i("div",{staticClass:"backTop"},[i("img",{attrs:{src:t.staticURL+t.page.extra.backTopImage}})]):t._e()],1),t._v(" "),i("el-col",{staticClass:"page-right"},[i("pageRight")],1)],1),t._v(" "),i("ContextMenu")],1)},staticRenderFns:[]},_e=i("VU/8")(Ce,we,!1,null,null,null).exports,ye={name:"PageEditor",data:function(){return{urlKey:"",show:!1}},created:function(){var t=this,e=this.$loading();this.urlKey=this.$route.query.urlKey,Ct.getPage({urlKey:this.urlKey}).then(function(i){t.$store.state.page=i.data,setTimeout(function(){t.show=!0,e.close()},500)})},mounted:function(){},methods:{},components:{PageCreate:_e}},xe={render:function(){var t=this.$createElement,e=this._self._c||t;return this.show?e("PageCreate"):this._e()},staticRenderFns:[]},ke=i("VU/8")(ye,xe,!1,null,null,null).exports,be=(i("sJ06"),{data:function(){return{urlKey:null,title:"",page:{}}},created:function(){var t=this;this.urlKey=this.$route.query.urlKey,Ct.getPage({urlKey:this.urlKey}).then(function(e){t.page=e.data,t.title=e.data.title})},mounted:function(){},methods:{},components:{HeadInfo:ot,BreadCrumb:fe}}),Te={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("HeadInfo"),t._v(" "),i("BreadCrumb"),t._v(" "),i("div",{staticClass:"preview"},[i("div",{staticClass:"miniprogram-wraper"},[i("div",{staticClass:"miniprogram-head"},[i("div",{staticClass:"head-title ellipsis"},[t._v(t._s(t.title))])]),t._v(" "),i("div",{staticClass:"miniprogram-con"},[i("iframe",{attrs:{src:"#/LandPage?urlKey="+t.urlKey}})])]),t._v(" "),i("div",{staticClass:"erweima-wraper"})])],1)},staticRenderFns:[]},Pe=i("VU/8")(be,Te,!1,null,null,null).exports,$e=(i("Dmry"),{data:function(){return{scrollbar:null,urlKey:null,page:null,scrollTop:!1,components:[],staticURL:Ct.staticURL}},computed:{style:function(){var t="";return this.page&&this.page.extra.backgroundColor&&(t+="background-color:"+this.page.extra.backgroundColor+";"),t}},created:function(){var t=this;Bt(),this.urlKey=this.$route.query.urlKey,Ct.getPage({urlKey:this.urlKey}).then(function(e){t.page=e.data,t.components=e.data.components,t.initPage()})},methods:{initPage:function(){var t=this.page;window.landpage_env="preview",document.title=t.title,t.extra.needBackTop&&window.addEventListener("scroll",function(t,e){var i=void 0,n=0;return function(){var a=this,o=Number(new Date)-n,s=arguments;function l(){n=Number(new Date),e.apply(a,s)}clearTimeout(i),o>t?l():i=setTimeout(l,t-o)}}(300,this.onScroll))},onScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=t>200},backTop:function(){!function t(){var e=document.documentElement.scrollTop||document.body.scrollTop;e>0&&(window.requestAnimationFrame(t),window.scrollTo(0,e-e/5))}()}},components:{Carousel:Et,Event:It,Goods:Nt,Picture:qt,Video:Mt}}),Se={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-wraper",style:t.style},[t._l(t.components,function(e){return i("div",{key:e.id,staticClass:"component-wraper"},[i(e.type,t._b({tag:"component"},"component",e,!1)),t._v(" "),t._l(e.children,function(e){return i(e.type,t._b({key:e.id,tag:"component",staticClass:"component-child"},"component",e,!1))})],2)}),t._v(" "),i("transition",{attrs:{name:"el-fade-in"}},[t.scrollTop&&t.page&&t.page.extra.needBackTop?i("div",{staticClass:"backTop",on:{click:t.backTop}},[i("img",{attrs:{src:t.staticURL+t.page.extra.backTopImage}})]):t._e()])],2)},staticRenderFns:[]};var Ue=i("VU/8")($e,Se,!1,function(t){i("uYbC")},null,null).exports;Y.default.use(tt.a);var Be=new tt.a({routes:[{path:"/Login",name:"Login",meta:{title:"登陆"},component:it},{path:"/",name:"PageList",meta:{title:"落地页列表"},component:bt},{path:"/PageCreate",name:"PageCreate",meta:{title:"新建落地页"},component:_e},{path:"/PageEditor",name:"PageEditor",meta:{title:"编辑落地页"},component:ke},{path:"/PagePreview",name:"PagePreview",meta:{title:"落地页预览"},component:Pe},{path:"/LandPage",name:"LandPage",component:Ue}]}),Le={type:"page",name:"页面"},Ve={defaultComponent:Le,activeComponent:Le,page:{name:"",title:"",urlKey:"",needExpire:!1,expireDate:"",extra:{backgroundColor:"",needBackTop:!1,backTopImage:"",needShare:!1,shareText:"",shareImage:""},components:[]},contextMenu:{top:0,left:0,type:"component",show:!1}},Ee=i("bOdI"),Re=i.n(Ee),Ke={setActiveComponent:function(t,e){t.activeComponent=e},addComponent:function(t,e){t.page.components.push(e)},addRelativeComponent:function(t,e){var i=e.relativeType,n=e.relativeComponent,a=e.component,o=t.page.components,s=o.findIndex(function(t,e){if(t.id===n.id)return!0});switch(i){case"child":o[s].hasOwnProperty("children")?o[s].children.push(a):Y.default.set(o[s],"children",[a]);break;case"pre":o.splice(s,0,a);break;case"next":o.splice(s+1,0,a)}},removeComponent:function(t,e){for(var i,n=t.page.components,a=-1,o=0;o<n.length;o++){if((i=n[o]).id==e.id){n.splice(o,1),a=o;break}if(i.children)for(var s=0;s<i.children.length;s++)if(i.children[s].id==e.id){i.children.splice(s,1),a=o,o=n.length;break}}-1!=a&&(t.page.components=n,t.activeComponent=t.defaultComponent)},resetActiveComponent:function(t,e){t.activeComponent=t.defaultComponent},setComponentProp:function(t,e){var i=t.page.components,n=null,a=void 0;i.find(function(t,i){if(t.id==e.id)return n=t,a=i;t.children&&t.children.find(function(t){if(t.id==e.id)return n=t,a=i})}),n&&(n.hasOwnProperty(e.prop)?(n[e.prop]=e.newVal,Y.default.set(t.page.components,a,i[a])):Y.default.set(n,e.prop,e.newVal))},updateComponentIndex:function(t,e){var i=e.type,n=e.component,a=t.page.components,o=a.findIndex(function(t,e){if(t.id===n.id)return!0});if(-1!=o)switch(i){case"pre":0!=o&&(a.splice(o,1),a.splice(o-1,0,n));break;case"next":o!=a.length-1&&(a.splice(o,1),a.splice(o+1,0,n));break;case"top":0!=o&&(a.splice(o,1),a.splice(0,0,n));break;case"bottom":o!=a.length-1&&(a.splice(o,1),a.splice(a.length,0,n))}},updateComponentLevel:function(t,e){for(var i=e.component,n=e.type,a=t.page.components,o=-1,s=-1,l=0;l<a.length;l++)if(a[l].children&&a[l].children.length>0){var r=a[l].children.findIndex(function(t){if(t.id==i.id)return!0});if(-1!=r){o=l,s=r;break}}if(-1!=s){switch(n){case"pre":s!=a[o].children.length-1&&(a[o].children.splice(s,1),a[o].children.splice(s+1,0,i));break;case"next":0!=s&&(a[o].children.splice(s,1),a[o].children.splice(s-1,0,i))}Y.default.set(t.page.components,o,a[o])}},setPageProp:function(t,e){var i=t.page;if(e.multi){var n=e.prop.split(".");i.hasOwnProperty(n[0])?i[n[0]][n[1]]=e.newVal:Y.default.set(i,n[0],Re()({},n[1],e.newVal))}else i.hasOwnProperty(e.prop)?i[e.prop]=e.newVal:Y.default.set(i,e.prop,e.newVal)},showContextMenu:function(t,e){var i=t.contextMenu;i.show=!0,i.top=e.top,i.left=e.left}},Ie={getShopList:function(t){t.commit;return new mt.a(function(t,e){})}};
/**!
 * 组件间需要共享的全部状态
 * 
 */Y.default.use(St.a);var De=new St.a.Store({state:Ve,mutations:Ke,actions:Ie});i("l2Nk"),i("8PcR");Be.beforeEach(function(t,e,i){t.meta.title&&(document.title=t.meta.title),i()}),Y.default.filter("toThousands",function(t){return(t||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}),Y.default.filter("number",function(t){return t=t||0,parseInt(t)}),Y.default.filter("formatDateTime",yt),Y.default.use(X.a),Y.default.use(G.a),Y.default.use(F.a),Y.default.use(W.a),Y.default.use(q.a),Y.default.use(z.a),Y.default.use(O.a),Y.default.use(I.a),Y.default.use(R.a),Y.default.use(V.a),Y.default.use(B.a),Y.default.use(S.a),Y.default.use(P.a),Y.default.use(b.a),Y.default.use(x.a),Y.default.use(_.a),Y.default.use(C.a),Y.default.use(v.a),Y.default.use(h.a),Y.default.use(u.a),Y.default.use(p.a.directive),Y.default.use(r.a),Y.default.prototype.$loading=p.a.service,Y.default.prototype.$message=s.a,Y.default.prototype.$alert=a.a.alert,Y.default.prototype.$confirm=a.a.confirm,Y.default.prototype.$prompt=a.a.prompt,Y.default.prototype.$ELEMENT={size:"small"},Y.default.config.productionTip=!1,window.landpage_env="editor",new Y.default({el:"#app",router:Be,store:De,components:{App:Q},template:"<App/>"})},NoWg:function(t,e){},RJsd:function(t,e){},TFIm:function(t,e){},WzZF:function(t,e){},"X+ky":function(t,e){},YHdu:function(t,e){},cDSy:function(t,e){},cwe7:function(t,e){},d7TW:function(t,e){},dJ7j:function(t,e){},dmRH:function(t,e){},hXTu:function(t,e){},isE6:function(t,e){},isgN:function(t,e){},jAzQ:function(t,e){},jZDA:function(t,e){},l2Nk:function(t,e){},lxJj:function(t,e){},oq7i:function(t,e){},sJ06:function(t,e){},uYbC:function(t,e){},vBcO:function(t,e){},wlbC:function(t,e){},ylrw:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f7a6eeebcb2acb9ca4d4.js.map